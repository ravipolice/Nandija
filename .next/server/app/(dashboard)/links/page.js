(()=>{var e={};e.id=644,e.ids=[644],e.modules={3193:(e,r,t)=>{Promise.resolve().then(t.bind(t,62383))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},25334:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(62688).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},39641:(e,r,t)=>{Promise.resolve().then(t.bind(t,42723))},42723:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var s=t(60687),a=t(43210),l=t(84617),i=t(70146),o=t(56304);let n=async(e,r)=>{if(!o.IG)throw Error("Firebase Storage is not initialized");let t=(0,i.KR)(o.IG,e);return await (0,i.D)(t,r),(0,i.qk)(t)};var d=t(75535),c=t(96474),p=t(47342),m=t(16023),u=t(25334);function x(){let[e,r]=(0,a.useState)([]),[t,i]=(0,a.useState)(!0),[o,x]=(0,a.useState)(!1),[h,g]=(0,a.useState)("url"),[f,y]=(0,a.useState)({name:"",playStoreUrl:"",apkUrl:"",iconUrl:""}),[b,v]=(0,a.useState)(null),[j,k]=(0,a.useState)(null),[w,N]=(0,a.useState)(0),[U,P]=(0,a.useState)(!1),S=async()=>{try{let e=await (0,l.Kl)();r(e)}catch(e){console.error("Error loading links:",e)}finally{i(!1)}},A=async e=>{e.preventDefault(),P(!0),N(0);try{let e=f.apkUrl.trim()||void 0,r=f.iconUrl.trim()||void 0;if(!e&&b){N(25);let r=f.name.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")||"link",t=`${r}_${Date.now()}_${Math.random().toString(36).substring(7)}.apk`,s=`useful_links/apks/${t}`;try{e=await n(s,b),console.log("APK uploaded successfully:",e),N(50)}catch(e){throw console.error("APK upload failed:",e),Error("Failed to upload APK file. Please check your internet connection and try again.")}}if(!r&&j){N(75);let e=f.name.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")||"link",t=`${e}_${Date.now()}_${Math.random().toString(36).substring(7)}.jpg`,s=`useful_links/icons/${t}`;try{r=await n(s,j),console.log("Icon uploaded successfully:",r)}catch(e){console.warn("Icon upload failed, continuing without icon:",e)}}let t=f.playStoreUrl.trim().length>0,s=!!e;if(!t&&!s)throw Error("Provide either Play Store URL OR APK file/URL");N(90);let a=d.Dc.now();await (0,l.Rr)({name:f.name.trim(),playStoreUrl:t?f.playStoreUrl.trim():void 0,apkUrl:e,iconUrl:r,createdAt:a,updatedAt:a}),N(100),y({name:"",playStoreUrl:"",apkUrl:"",iconUrl:""}),v(null),k(null),N(0),x(!1),await S()}catch(e){console.error("Error creating link:",e),alert(e?.message||"Failed to create link")}finally{P(!1),N(0)}};return t?(0,s.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,s.jsx)("div",{className:"text-lg text-gray-600",children:"Loading..."})}):(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Useful Links"}),(0,s.jsxs)("button",{onClick:()=>x(!o),className:"flex items-center gap-2 rounded-lg bg-primary-600 px-4 py-2 text-white transition-colors hover:bg-primary-700",children:[(0,s.jsx)(c.A,{className:"h-5 w-5"}),"Add Link"]})]}),o&&(0,s.jsxs)("div",{className:"mb-6 rounded-lg bg-white p-6 shadow-md",children:[(0,s.jsx)("h2",{className:"mb-4 text-xl font-semibold",children:"Add New Link"}),(0,s.jsxs)("div",{className:"mb-4 flex gap-2 border-b border-gray-200",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>{g("url"),v(null),k(null)},className:`flex items-center gap-2 px-4 py-2 font-medium transition-colors ${"url"===h?"border-b-2 border-primary-600 text-primary-600":"text-gray-500 hover:text-gray-700"}`,children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),"URLs"]}),(0,s.jsxs)("button",{type:"button",onClick:()=>{g("file"),y({...f,apkUrl:"",iconUrl:""})},className:`flex items-center gap-2 px-4 py-2 font-medium transition-colors ${"file"===h?"border-b-2 border-primary-600 text-primary-600":"text-gray-500 hover:text-gray-700"}`,children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),"Upload Files"]})]}),(0,s.jsxs)("form",{onSubmit:A,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name *"}),(0,s.jsx)("input",{type:"text",required:!0,value:f.name,onChange:e=>y({...f,name:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Play Store URL"}),(0,s.jsx)("input",{type:"url",value:f.playStoreUrl,onChange:e=>y({...f,playStoreUrl:e.target.value}),placeholder:"https://play.google.com/store/apps/...",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),"file"===h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"APK File *"}),(0,s.jsx)("input",{type:"file",accept:".apk",onChange:e=>{let r=e.target.files?.[0];if(r&&(v(r),!f.name)){let e=r.name.replace(/\.apk$/i,"");y({...f,name:e})}},className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"}),b&&(0,s.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",b.name," (",(b.size/1024/1024).toFixed(2)," MB)"]}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Or provide APK URL below if file is already hosted"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Icon Image"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let r=e.target.files?.[0];if(r){if(!r.type.startsWith("image/")){alert("Please select an image file");return}k(r)}},className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"}),j&&(0,s.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",j.name," (",(j.size/1024).toFixed(2)," KB)"]}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Or provide Icon URL below if image is already hosted"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"APK URL"}),(0,s.jsx)("input",{type:"url",value:f.apkUrl,onChange:e=>y({...f,apkUrl:e.target.value}),placeholder:"https://example.com/app.apk",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Icon URL"}),(0,s.jsx)("input",{type:"url",value:f.iconUrl,onChange:e=>y({...f,iconUrl:e.target.value}),placeholder:"https://example.com/icon.png",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),w>0&&w<100&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"mb-1 flex justify-between text-sm text-gray-600",children:[(0,s.jsx)("span",{children:"Uploading..."}),(0,s.jsxs)("span",{children:[w,"%"]})]}),(0,s.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-gray-200",children:(0,s.jsx)("div",{className:"h-full bg-primary-600 transition-all duration-300",style:{width:`${w}%`}})})]}),(0,s.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,s.jsx)("button",{type:"submit",disabled:U||"file"===h&&!b&&!f.apkUrl.trim(),className:"rounded-lg bg-primary-600 px-6 py-2 text-white transition-colors hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:U?"Saving...":"Save Link"}),(0,s.jsx)("button",{type:"button",onClick:()=>{x(!1),y({name:"",playStoreUrl:"",apkUrl:"",iconUrl:""}),v(null),k(null),N(0)},className:"rounded-lg border border-gray-300 px-6 py-2 text-gray-700 transition-colors hover:bg-gray-50",children:"Cancel"})]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,s.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow-md transition-shadow hover:shadow-lg",children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center gap-4",children:[e.iconUrl?(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("img",{src:e.iconUrl,alt:e.name,className:"h-16 w-16 rounded-lg object-cover border border-gray-200",loading:"lazy",referrerPolicy:"no-referrer",onError:r=>{let t=r.currentTarget;if(!t.dataset.failed){if(t.dataset.failed="1",e.iconUrl?.includes("lh3.googleusercontent.com")){let r=e.iconUrl.match(/\/d\/([-\w]{25,})/);if(r){let e=r[1];t.src=`https://drive.google.com/thumbnail?id=${e}&sz=w200`;return}}t.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Crect fill='%23e5e7eb' width='64' height='64' rx='8'/%3E%3Ctext fill='%239ca3af' font-family='sans-serif' font-size='24' font-weight='bold' x='50%25' y='50%25' text-anchor='middle' dy='.3em'%3EApp%3C/text%3E%3C/svg%3E"}}})}):(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-lg bg-gray-100 border border-gray-200",children:(0,s.jsx)("span",{className:"text-2xl font-bold text-gray-400",children:e.name.charAt(0).toUpperCase()})})}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[e.playStoreUrl&&(0,s.jsxs)("a",{href:e.playStoreUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-md bg-blue-50 px-3 py-2 text-sm text-blue-700 transition-colors hover:bg-blue-100",children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),"Play Store"]}),e.apkUrl&&(0,s.jsxs)("a",{href:e.apkUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-md bg-green-50 px-3 py-2 text-sm text-green-700 transition-colors hover:bg-green-100",children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),"Download APK"]})]})]},e.id))}),0===e.length&&(0,s.jsx)("div",{className:"rounded-lg bg-white p-12 text-center shadow-md",children:(0,s.jsx)("p",{className:"text-lg text-gray-500",children:"No links found"})})]})}},55511:e=>{"use strict";e.exports=require("crypto")},62383:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\ravip\\\\AndroidStudioProjects\\\\pmd-admin\\\\app\\\\(dashboard)\\\\links\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\ravip\\AndroidStudioProjects\\pmd-admin\\app\\(dashboard)\\links\\page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67796:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=t(65239),a=t(48088),l=t(88170),i=t.n(l),o=t(30893),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);t.d(r,n);let d={children:["",{children:["(dashboard)",{children:["links",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,62383)),"C:\\Users\\ravip\\AndroidStudioProjects\\pmd-admin\\app\\(dashboard)\\links\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,71934)),"C:\\Users\\ravip\\AndroidStudioProjects\\pmd-admin\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"C:\\Users\\ravip\\AndroidStudioProjects\\pmd-admin\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\ravip\\AndroidStudioProjects\\pmd-admin\\app\\(dashboard)\\links\\page.tsx"],p={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/links/page",pathname:"/links",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96474:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(62688).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,192,151,454],()=>t(67796));module.exports=s})();