(()=>{var e={};e.id=827,e.ids=[827],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9362:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d});var o=r(65239),a=r(48088),s=r(88170),i=r.n(s),l=r(30893),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(t,n);let d={children:["",{children:["(dashboard)",{children:["documents",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,22276)),"C:\\Users\\ravip\\AndroidStudioProjects\\pmd-admin\\app\\(dashboard)\\documents\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,71934)),"C:\\Users\\ravip\\AndroidStudioProjects\\pmd-admin\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"C:\\Users\\ravip\\AndroidStudioProjects\\pmd-admin\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\ravip\\AndroidStudioProjects\\pmd-admin\\app\\(dashboard)\\documents\\page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},m=new o.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/documents/page",pathname:"/documents",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},22276:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\ravip\\\\AndroidStudioProjects\\\\pmd-admin\\\\app\\\\(dashboard)\\\\documents\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\ravip\\AndroidStudioProjects\\pmd-admin\\app\\(dashboard)\\documents\\page.tsx","default")},25334:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(62688).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30776:(e,t,r)=>{Promise.resolve().then(r.bind(r,71976))},31158:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(62688).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71976:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var o=r(60687),a=r(43210),s=r(84617);async function i(){try{let e=[];try{let{getDocumentsList:t}=await Promise.resolve().then(r.bind(r,84617));e=(await t()).map(e=>({id:e.id,title:e.title||e.name||"Untitled Document",url:e.url||e.URL||"",category:e.category||e.Category,uploadedBy:e.uploadedBy||e.UploadedBy,uploadedDate:e.uploadedDate||e.UploadedDate||(e.createdAt?.toDate?e.createdAt.toDate().toISOString():void 0),description:e.description||e.Description,fileId:e.fileId,fileType:e.fileType||e.type,name:e.name||e.title,type:e.type||e.fileType,createdAt:e.createdAt?.toDate?e.createdAt.toDate():e.createdAt?new Date(e.createdAt):void 0})),console.log(`Found ${e.length} documents in Firestore`)}catch(e){console.warn("Error fetching from Firestore:",e?.message||"Unknown")}let t=[];try{let e="/api/documents";console.log("Fetching from API route:",e);let r=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(console.log("API Response Status:",r.status,r.statusText),console.log("API Response OK:",r.ok),r.ok){let e=await r.json();console.log("API Response Data Type:",Array.isArray(e)?"array":typeof e),console.log("API Response Data:",e),t=Array.isArray(e)?e:e?.data||e?.documents||e?.items||[],console.log(`Found ${t.length} documents from Apps Script API`)}else{let e=await r.text().catch(()=>"Could not read error");console.error("API Route Error Response:",r.status,e)}}catch(e){console.error("Error fetching from Apps Script API:",e?.message||"Unknown"),console.error("Error details:",{name:e?.name,message:e?.message,stack:e?.stack})}let o=new Map;e.forEach(e=>{e.url&&o.set(e.url,e)}),t.forEach(e=>{let t=e.URL||e.url;t&&!o.has(t)&&o.set(t,e)});let a=Array.from(o.values());if(!Array.isArray(a))return console.warn("Combined documents is not an array"),[];let s=a.map(e=>{let t=e.Delete||e.delete||"";return"deleted"===t.toString().toLowerCase()?null:{id:e.id||e.fileId||void 0,title:e.Title||e.title||e.name||"Untitled Document",url:e.URL||e.url||"",category:e.Category||e.category||void 0,uploadedBy:e.UploadedBy||e.uploadedBy||void 0,uploadedDate:e.UploadedDate||e.uploadedDate||void 0,description:e.Description||e.description||void 0,fileId:e.fileId||void 0,fileType:e.fileType||void 0,name:e.Title||e.title||e.name||"Untitled Document",type:e.fileType||e.Category||e.category||void 0,createdAt:e.UploadedDate?new Date(e.UploadedDate):e.createdAt?e.createdAt.toDate?e.createdAt.toDate():new Date(e.createdAt):void 0}}).filter(e=>null!==e);return s.sort((e,t)=>{let r=e.createdAt?.getTime()||(e.uploadedDate?new Date(e.uploadedDate).getTime():0);return(t.createdAt?.getTime()||(t.uploadedDate?new Date(t.uploadedDate).getTime():0))-r}),s}catch(e){throw console.error("Error fetching documents:",e),Error(`Failed to fetch documents: ${e?.message||"Unknown error"}`)}}async function l(e,t,r){try{let o=await fetch("/api/documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"deleteDocument",title:e,fileId:r,userEmail:t})});if(!o.ok){let e=await o.json().catch(()=>({error:"Unknown error"}));throw Error(e.error||`Failed to delete document: ${o.status}`)}let a=await o.json();if(!a.success)throw Error(a.error||"Failed to delete document")}catch(e){throw console.error("Error deleting document:",e),Error(`Failed to delete document: ${e?.message||"Unknown error"}`)}}var n=r(84279),d=r(96474),c=r(47342),p=r(16023),m=r(10022);let u=(0,r(62688).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var g=r(31158),x=r(88233),y=r(25334),h=r(96241);function f(){let{user:e}=(0,n.A)(),[t,r]=(0,a.useState)([]),[f,b]=(0,a.useState)(!0),[v,w]=(0,a.useState)("url"),[j,N]=(0,a.useState)("gdrive"),[k,A]=(0,a.useState)(!1),[D,C]=(0,a.useState)({name:"",url:"",type:"",category:"",description:""}),[S,P]=(0,a.useState)(null),[U,T]=(0,a.useState)(0),[E,q]=(0,a.useState)(!1),[I,F]=(0,a.useState)(null),R=async()=>{try{console.log("Loading documents..."),console.log("Environment:","production"),console.log("API Base URL:","server");let e=await i();if(console.log("Loaded documents:",e),console.log("Number of documents:",e.length),e.length>0&&console.log("First document sample:",JSON.stringify(e[0],null,2)),r(e),0===e.length){console.warn("No documents found. Make sure documents exist in the Google Sheet."),console.warn("Check browser console for detailed error messages."),console.warn("Testing API route directly...");try{let e=await fetch("/api/documents");console.log("API Route Status:",e.status);let t=await e.json();console.log("API Route Response:",t)}catch(e){console.error("API Route Test Failed:",e)}}}catch(e){console.error("Error loading documents:",e),console.error("Error details:",{message:e?.message,code:e?.code,stack:e?.stack}),e?.message,console.error("Full error:",e)}finally{b(!1)}},O=async t=>{t.preventDefault(),q(!0);try{await (0,s.ui)({name:D.name.trim(),title:D.name.trim(),url:D.url.trim(),URL:D.url.trim(),type:D.type.trim()||void 0,fileType:D.type.trim()||void 0,category:D.category.trim()||void 0,description:D.description.trim()||void 0,uploadedBy:e?.email||void 0,uploadedDate:new Date().toISOString()}),C({name:"",url:"",type:"",category:"",description:""}),A(!1),await R()}catch(e){console.error("Error creating document:",e),alert("Failed to create document")}finally{q(!1)}},$=async t=>{if(t.preventDefault(),!S){alert("Please select a file to upload");return}q(!0),T(0);try{let t=S.type||M(S.name),r=setInterval(()=>{T(e=>e>=90?(clearInterval(r),90):e+10)},200);if("firebase"===j){let o=await _(S),a=await fetch("/api/documents/upload-firebase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:D.name.trim()||S.name.replace(/\.[^/.]+$/,""),fileBase64:o,mimeType:t,category:D.category.trim()||void 0,description:D.description.trim()||void 0,userEmail:e?.email||"admin@pmd.com"})});if(clearInterval(r),T(100),!a.ok){let e=await a.json().catch(()=>({error:"Unknown error"}));throw Error(e.error||`HTTP error! status: ${a.status}`)}let s=await a.json();if(!s.success)throw Error(s.error||"Upload failed");console.log("✅ Firebase upload successful:",s),console.log("✅ Uploaded document URL:",s.url),console.log("✅ Uploaded document fileId:",s.fileId);try{console.log("\uD83D\uDCDD Registering document in Google Sheet...");let t=await fetch("/api/documents/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"upload",title:D.name.trim()||S.name.replace(/\.[^/.]+$/,""),category:D.category.trim()||"",description:D.description.trim()||"",externalUrl:s.url,userEmail:e?.email||"admin@pmd.com"})});if(t.ok){let e=await t.json();e.success?console.log("✅ Document registered in Google Sheet"):console.warn("⚠️ Google Sheet registration returned success=false:",e.error)}else{let e=await t.json().catch(()=>({error:"Unknown error"}));console.warn("⚠️ Failed to register in Google Sheet:",e.error)}}catch(e){console.warn("⚠️ Error registering in Google Sheet (non-critical):",e.message)}C({name:"",url:"",type:"",category:"",description:""}),P(null),T(0),A(!1),await R()}else{let o=await _(S),a=await fetch("/api/documents/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"upload",title:D.name.trim(),fileBase64:o,mimeType:t,category:D.category.trim()||void 0,description:D.description.trim()||void 0,userEmail:e?.email||"admin@pmd.com"})});if(clearInterval(r),T(100),!a.ok){let e=await a.json().catch(()=>({error:"Unknown error"}));throw Error(e.error||`HTTP error! status: ${a.status}`)}let s=await a.json();if(!s.success)throw Error(s.error||"Upload failed")}C({name:"",url:"",type:"",category:"",description:""}),P(null),T(0),A(!1),await R()}catch(e){console.error("Error uploading document:",e),alert(`Failed to upload document: ${e?.message||"Unknown error"}`)}finally{q(!1),T(0)}},_=e=>new Promise((t,r)=>{let o=new FileReader;o.onload=()=>{let e=o.result;t(e.includes(",")?e.split(",")[1]:e)},o.onerror=r,o.readAsDataURL(e)}),M=e=>({pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",txt:"text/plain"})[e.split(".").pop()?.toLowerCase()||""]||"application/octet-stream",L=async t=>{if(!e?.email){alert("You must be logged in to delete documents");return}if(confirm(`Are you sure you want to delete "${t.title}"?`)){F(t.title);try{await l(t.title,e.email,t.fileId),await R()}catch(e){console.error("Error deleting document:",e),alert(`Failed to delete document: ${e?.message||"Unknown error"}`)}finally{F(null)}}},G=e=>{let t=function(e){if(!e)return e;let t=null,r=e.match(/\/file\/d\/([-\w]{25,})/);if(r&&(t=r[1]),!t){let r=e.match(/[?&]id=([-\w]{25,})/);r&&(t=r[1])}if(!t){let r=e.match(/\/uc\?export=view&id=([-\w]{25,})/);r&&(t=r[1])}return t?`https://drive.google.com/file/d/${t}/preview`:e}(e.url);window.open(t,"_blank","noopener,noreferrer")},B=e=>{let t=function(e){if(!e)return e;let t=null,r=e.match(/\/file\/d\/([-\w]{25,})/);if(r&&(t=r[1]),!t){let r=e.match(/[?&]id=([-\w]{25,})/);r&&(t=r[1])}if(!t){let r=e.match(/\/uc\?export=view&id=([-\w]{25,})/);r&&(t=r[1])}return t?`https://drive.google.com/uc?export=download&id=${t}`:e}(e.url),r=document.createElement("a");r.href=t,r.download=e.title||"document",r.target="_blank",document.body.appendChild(r),r.click(),document.body.removeChild(r)};return f?(0,o.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,o.jsx)("div",{className:"text-lg text-gray-600",children:"Loading..."})}):(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Documents"}),(0,o.jsxs)("button",{onClick:()=>A(!k),className:"flex items-center gap-2 rounded-lg bg-primary-600 px-4 py-2 text-white transition-colors hover:bg-primary-700",children:[(0,o.jsx)(d.A,{className:"h-5 w-5"}),"Add Document"]})]}),k&&(0,o.jsxs)("div",{className:"mb-6 rounded-lg bg-white p-6 shadow-md",children:[(0,o.jsx)("h2",{className:"mb-4 text-xl font-semibold",children:"Add New Document"}),(0,o.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex gap-4",children:[(0,o.jsxs)("button",{type:"button",onClick:()=>{w("url"),P(null),C({name:"",url:"",type:"",category:"",description:""})},className:`flex items-center gap-2 px-4 py-2 font-medium transition-colors ${"url"===v?"border-b-2 border-primary-600 text-primary-600":"text-gray-500 hover:text-gray-700"}`,children:[(0,o.jsx)(c.A,{className:"h-4 w-4"}),"Add by URL"]}),(0,o.jsxs)("button",{type:"button",onClick:()=>{w("upload"),C({name:"",url:"",type:"",category:"",description:""})},className:`flex items-center gap-2 px-4 py-2 font-medium transition-colors ${"upload"===v?"border-b-2 border-primary-600 text-primary-600":"text-gray-500 hover:text-gray-700"}`,children:[(0,o.jsx)(p.A,{className:"h-4 w-4"}),"Upload File"]})]})}),"url"===v&&(0,o.jsxs)("form",{onSubmit:O,children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name *"}),(0,o.jsx)("input",{type:"text",required:!0,value:D.name,onChange:e=>C({...D,name:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"URL *"}),(0,o.jsx)("input",{type:"url",required:!0,value:D.url,onChange:e=>C({...D,url:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,o.jsx)("input",{type:"text",value:D.type,onChange:e=>C({...D,type:e.target.value}),placeholder:"e.g., PDF, DOCX",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,o.jsx)("input",{type:"text",value:D.category,onChange:e=>C({...D,category:e.target.value}),placeholder:"Optional category",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,o.jsxs)("div",{className:"md:col-span-2",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,o.jsx)("textarea",{value:D.description,onChange:e=>C({...D,description:e.target.value}),placeholder:"Optional description",rows:3,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),(0,o.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,o.jsx)("button",{type:"submit",disabled:E,className:"rounded-lg bg-primary-600 px-6 py-2 text-white transition-colors hover:bg-primary-700 disabled:opacity-50",children:E?"Saving...":"Save Document"}),(0,o.jsx)("button",{type:"button",onClick:()=>{A(!1),C({name:"",url:"",type:"",category:"",description:""})},className:"rounded-lg border border-gray-300 px-6 py-2 text-gray-700 transition-colors hover:bg-gray-50",children:"Cancel"})]})]}),"upload"===v&&(0,o.jsxs)("form",{onSubmit:$,children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Upload To"}),(0,o.jsxs)("div",{className:"mt-2 flex gap-4 text-sm",children:[(0,o.jsxs)("label",{className:"inline-flex items-center gap-2 text-gray-800",children:[(0,o.jsx)("input",{type:"radio",name:"upload-target",value:"gdrive",checked:"gdrive"===j,onChange:()=>N("gdrive")}),(0,o.jsx)("span",{children:"Google Drive (Apps Script)"})]}),(0,o.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,o.jsx)("input",{type:"radio",name:"upload-target",value:"firebase",checked:"firebase"===j,onChange:()=>N("firebase")}),(0,o.jsx)("span",{className:"text-gray-800",children:"Firebase Storage"})]})]}),(0,o.jsx)("p",{className:"mt-1 text-xs text-gray-600",children:"Drive (Apps Script) keeps documents in the existing sheet/Drive path. Firebase stores the file in Storage and metadata in Firestore."})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name *"}),(0,o.jsx)("input",{type:"text",required:!0,value:D.name,onChange:e=>C({...D,name:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"File *"}),(0,o.jsx)("input",{type:"file",required:!0,onChange:e=>{let t=e.target.files?.[0];if(t){P(t),D.name||C({...D,name:t.name.replace(/\.[^/.]+$/,"")});let e=t.name.split(".").pop()?.toUpperCase();e&&!D.type&&C({...D,type:e})}},className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm file:mr-4 file:rounded-md file:border-0 file:bg-primary-50 file:px-4 file:py-2 file:text-primary-700 hover:file:bg-primary-100 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"}),S&&(0,o.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Selected: ",S.name," (",(S.size/1024/1024).toFixed(2)," MB)"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,o.jsx)("input",{type:"text",value:D.type,onChange:e=>C({...D,type:e.target.value}),placeholder:"Auto-detected from file",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,o.jsx)("input",{type:"text",value:D.category,onChange:e=>C({...D,category:e.target.value}),placeholder:"Optional category",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,o.jsxs)("div",{className:"md:col-span-2",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,o.jsx)("textarea",{value:D.description,onChange:e=>C({...D,description:e.target.value}),placeholder:"Optional description",rows:3,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),U>0&&U<100&&(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsxs)("div",{className:"mb-1 flex justify-between text-sm text-gray-600",children:[(0,o.jsx)("span",{children:"Uploading..."}),(0,o.jsxs)("span",{children:[U,"%"]})]}),(0,o.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-gray-200",children:(0,o.jsx)("div",{className:"h-full bg-primary-600 transition-all duration-300",style:{width:`${U}%`}})})]}),(0,o.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,o.jsx)("button",{type:"submit",disabled:E||!S,className:"rounded-lg bg-primary-600 px-6 py-2 text-white transition-colors hover:bg-primary-700 disabled:opacity-50",children:E?"Uploading...":"Upload Document"}),(0,o.jsx)("button",{type:"button",onClick:()=>{A(!1),C({name:"",url:"",type:"",category:"",description:""}),P(null),T(0)},className:"rounded-lg border border-gray-300 px-6 py-2 text-gray-700 transition-colors hover:bg-gray-50",children:"Cancel"})]})]})]}),(0,o.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.map((e,t)=>(0,o.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow-md",children:[(0,o.jsx)("div",{className:"mb-4 flex items-start justify-between",children:(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)(m.A,{className:"h-8 w-8 text-primary-600"}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,o.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),(()=>{let t=e.url||"",r=t.includes("storage.googleapis.com")||t.includes("firebasestorage.app"),a=t.includes("drive.google.com");return r?(0,o.jsx)("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-800",title:"Stored in Firebase Storage",children:"\uD83D\uDD25 Firebase"}):a?(0,o.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2 py-0.5 text-xs font-medium text-green-800",title:"Stored in Google Drive",children:"\uD83D\uDCC1 Google Drive"}):(0,o.jsx)("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-800",title:"Unknown source",children:"❓ Unknown"})})()]}),e.category&&(0,o.jsx)("p",{className:"text-sm text-gray-500",children:e.category}),e.description&&(0,o.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:e.description})]})]})}),e.uploadedDate&&(0,o.jsxs)("p",{className:"mb-2 text-xs text-gray-500",children:["Uploaded on: ",e.uploadedDate?(0,h.r)(new Date(e.uploadedDate)):"Unknown date"]}),e.uploadedBy&&(0,o.jsxs)("p",{className:"mb-4 text-xs text-gray-500",children:["Uploaded by: ",e.uploadedBy]}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,o.jsxs)("button",{onClick:()=>G(e),className:"flex items-center gap-2 rounded-md bg-blue-50 px-3 py-2 text-sm text-blue-700 transition-colors hover:bg-blue-100",title:"Preview document",children:[(0,o.jsx)(u,{className:"h-4 w-4"}),"Preview"]}),(0,o.jsxs)("button",{onClick:()=>B(e),className:"flex items-center gap-2 rounded-md bg-green-50 px-3 py-2 text-sm text-green-700 transition-colors hover:bg-green-100",title:"Download document",children:[(0,o.jsx)(g.A,{className:"h-4 w-4"}),"Download"]}),(0,o.jsxs)("button",{onClick:()=>L(e),disabled:I===e.title,className:"flex items-center gap-2 rounded-md bg-red-50 px-3 py-2 text-sm text-red-700 transition-colors hover:bg-red-100 disabled:opacity-50",title:"Delete document",children:[(0,o.jsx)(x.A,{className:"h-4 w-4"}),I===e.title?"Deleting...":"Delete"]}),(0,o.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-md bg-gray-50 px-3 py-2 text-sm text-gray-700 transition-colors hover:bg-gray-100",title:"Open in new tab",children:[(0,o.jsx)(y.A,{className:"h-4 w-4"}),"Open"]})]})]},e.id||e.fileId||t))}),0===t.length&&(0,o.jsx)("div",{className:"rounded-lg bg-white p-12 text-center shadow-md",children:(0,o.jsx)("p",{className:"text-lg text-gray-500",children:"No documents found"})})]})}},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},88233:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(62688).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},95928:(e,t,r)=>{Promise.resolve().then(r.bind(r,22276))},96474:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(62688).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[447,192,151,454],()=>r(9362));module.exports=o})();