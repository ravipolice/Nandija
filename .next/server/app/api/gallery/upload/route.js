(()=>{var e={};e.id=396,e.ids=[396],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},46970:(e,r,o)=>{"use strict";o.r(r),o.d(r,{patchFetch:()=>m,routeModule:()=>c,serverHooks:()=>y,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>g});var t={};o.r(t),o.d(t,{POST:()=>u,dynamic:()=>i});var s=o(96559),a=o(48088),n=o(37719),l=o(32190);let i="force-dynamic",p=()=>{let e=process.env.APPS_SCRIPT_SECRET_TOKEN||"Ravi@PMD_2025_Secure_Token";return e&&"CHANGE_THIS_IN_PRODUCTION"!==e?e:"Ravi@PMD_2025_Secure_Token"};async function u(e){try{let{title:r,fileBase64:o,mimeType:t,category:s,description:a,userEmail:n}=await e.json();if(!o)return l.NextResponse.json({success:!1,error:"Missing required field: fileBase64"},{status:400});let i=p(),u=`https://script.google.com/macros/s/AKfycbwXIhqfYWER3Z2KBlcrqZjyWCBfacHOeKCo_buWaZ6nG7qQpWaN91V7Y-IclzmOvG73/exec?action=upload&token=${encodeURIComponent(i)}`;console.log("Gallery Upload API Route: Uploading image:",r||"Untitled"),console.log("Gallery Upload API Route: File size (base64):",o.length,"characters"),console.log("Gallery Upload API Route: MIME type:",t),console.log("Gallery Upload API Route: Token present:",i?"Yes":"No");let c=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"upload",title:r||"Untitled",fileBase64:o,mimeType:t||"image/jpeg",category:s||"Gallery",description:a||"",userEmail:n||"admin@pmd.com",token:i}),cache:"no-store"});if(!c.ok){let e=await c.text();throw console.error("Gallery Upload API Route: Upload error response:",e),Error(`HTTP error! status: ${c.status}, body: ${e}`)}let d=await c.json();return console.log("Gallery Upload API Route: Upload response:",d),l.NextResponse.json(d,{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"}})}catch(e){return console.error("Gallery Upload API Route: Error uploading image:",e),l.NextResponse.json({success:!1,error:e.message||"Failed to upload image"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/gallery/upload/route",pathname:"/api/gallery/upload",filename:"route",bundlePath:"app/api/gallery/upload/route"},resolvedPagePath:"C:\\Users\\ravip\\AndroidStudioProjects\\pmd-admin\\app\\api\\gallery\\upload\\route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:d,workUnitAsyncStorage:g,serverHooks:y}=c;function m(){return(0,n.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:g})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),t=r.X(0,[447,580],()=>o(46970));module.exports=t})();