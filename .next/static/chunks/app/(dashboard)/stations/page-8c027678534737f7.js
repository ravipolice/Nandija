(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[462],{2525:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3717:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4616:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5049:(e,t,s)=>{Promise.resolve().then(s.bind(s,7139))},7139:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5155),a=s(2115),l=s(1593),o=s(4616),d=s(3717),i=s(2525);let n={name:250,district:200,stdCode:120,status:120,actions:120};function c(){let[e,t]=(0,a.useState)([]),[s,c]=(0,a.useState)([]),[u,m]=(0,a.useState)(!0),[x,h]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null),[f,g]=(0,a.useState)(""),[v,y]=(0,a.useState)({name:"",stdCode:""}),[w,N]=(0,a.useState)(!1),[j,k]=(0,a.useState)(()=>{{let e=localStorage.getItem("stationColumnWidths");return e?{...n,...JSON.parse(e)}:n}}),[C,S]=(0,a.useState)(null);(0,a.useEffect)(()=>{A()},[]),(0,a.useEffect)(()=>{f?E(f):E()},[f]);let A=async()=>{try{let[e,s]=await Promise.all([(0,l.cM)(),(0,l.OT)()]);console.log("Loaded districts:",e),c(e),t(s),0===e.length&&console.warn("No districts found. Make sure districts exist in Firestore.")}catch(e){console.error("Error loading data:",e),alert("Failed to load data. Please check the console for details.")}finally{m(!1)}},E=async e=>{try{console.log("Loading stations for district:",e||"all");let s=await (0,l.OT)(e);console.log("Loaded stations:",s),t(s),0===s.length&&e&&console.warn("No stations found for district: ".concat(e))}catch(e){console.error("Error loading stations:",e),alert("Failed to load stations. Please check the console for details.")}},D=e=>{b(e.id||null),y({name:e.name,stdCode:e.stdCode||""}),g(e.district),h(!0)},M=async(e,t)=>{if(confirm('Are you sure you want to delete "'.concat(t,'"?')))try{await (0,l.eT)(e),await E(f||void 0)}catch(e){console.error("Error deleting station:",e),alert("Failed to delete station")}},L=()=>{h(!1),b(null),y({name:"",stdCode:""}),p||g("")},z=(e,t)=>{e.preventDefault(),S(t);let s=e.pageX,r=j[t],a=e=>{let a=Math.max(50,r+(e.pageX-s));k(e=>{let s={...e,[t]:a};return localStorage.setItem("stationColumnWidths",JSON.stringify(s)),s})},l=()=>{S(null),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",l)},W=async e=>{if(e.preventDefault(),!f){alert("Please select a district");return}N(!0);try{p?await (0,l.WC)(p,{name:v.name.trim(),district:f,stdCode:v.stdCode.trim()||void 0}):await (0,l.Z1)({name:v.name.trim(),district:f,stdCode:v.stdCode.trim()||void 0}),L(),await E(f)}catch(e){console.error("Error saving station:",e),alert("Failed to ".concat(p?"update":"create"," station"))}finally{N(!1)}},O=f?e.filter(e=>e.district===f):e;return u?(0,r.jsx)("div",{className:"flex h-screen items-center justify-center bg-gradient-dark",children:(0,r.jsx)("div",{className:"text-lg text-slate-100-secondary",children:"Loading..."})}):(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"Stations"}),(0,r.jsxs)("button",{onClick:()=>h(!x),className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-purple-600 to-blue-600 px-4 py-2 text-white transition-all hover:shadow-lg hover:shadow-purple-500/50",children:[(0,r.jsx)(o.A,{className:"h-5 w-5"}),"Add Station"]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-100-secondary",children:"Filter by District"}),(0,r.jsxs)("select",{value:f,onChange:e=>g(e.target.value),className:"mt-1 block w-full max-w-xs rounded-md bg-dark-card border border-dark-border px-3 py-2 text-slate-100 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50",children:[(0,r.jsx)("option",{value:"",children:"All Districts"}),s.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),x&&(0,r.jsxs)("div",{className:"mb-6 rounded-lg bg-dark-card border border-dark-border p-6 shadow-lg",children:[(0,r.jsx)("h2",{className:"mb-4 text-xl font-semibold text-slate-100",children:p?"Edit Station":"Add New Station"}),(0,r.jsxs)("form",{onSubmit:W,children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-100-secondary",children:"Name *"}),(0,r.jsx)("input",{type:"text",required:!0,value:v.name,onChange:e=>y({...v,name:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-100-secondary",children:"District *"}),(0,r.jsxs)("select",{required:!0,value:f,onChange:e=>g(e.target.value),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50",children:[(0,r.jsx)("option",{value:"",children:"Select District"}),s.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-100-secondary",children:"STD Code"}),(0,r.jsx)("input",{type:"text",value:v.stdCode,onChange:e=>y({...v,stdCode:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50"})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,r.jsx)("button",{type:"submit",disabled:w,className:"rounded-lg bg-gradient-to-r from-purple-600 to-blue-600 px-6 py-2 text-white transition-all hover:shadow-lg hover:shadow-purple-500/50 disabled:opacity-50",children:w?"Saving...":"Save Station"}),(0,r.jsx)("button",{type:"button",onClick:L,className:"rounded-lg border border-dark-border px-6 py-2 text-slate-100-secondary transition-colors hover:bg-dark-sidebar hover:text-slate-100",children:"Cancel"})]})]})]}),(0,r.jsxs)("div",{className:"overflow-x-auto rounded-lg bg-dark-card border border-dark-border shadow-lg",style:{overflowX:"scroll",WebkitOverflowScrolling:"touch"},children:[(0,r.jsxs)("table",{className:"w-full",style:{tableLayout:"fixed"},children:[(0,r.jsx)("thead",{className:"bg-dark-sidebar border-b border-dark-border",children:(0,r.jsxs)("tr",{children:[(0,r.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:j.name},children:["Name",(0,r.jsx)("div",{onMouseDown:e=>z(e,"name"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,r.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:j.district},children:["District",(0,r.jsx)("div",{onMouseDown:e=>z(e,"district"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,r.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:j.stdCode},children:["STD Code",(0,r.jsx)("div",{onMouseDown:e=>z(e,"stdCode"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,r.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:j.status},children:["Status",(0,r.jsx)("div",{onMouseDown:e=>z(e,"status"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:j.actions},children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-dark-border bg-dark-card",children:O.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-dark-sidebar transition-colors",children:[(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-100 overflow-hidden text-ellipsis",style:{maxWidth:j.name},children:e.name}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-100-secondary overflow-hidden text-ellipsis",style:{maxWidth:j.district},children:e.district}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-100-secondary overflow-hidden text-ellipsis",style:{maxWidth:j.stdCode},children:e.stdCode||"N/A"}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4 overflow-hidden text-ellipsis",style:{maxWidth:j.status},children:(0,r.jsx)("span",{className:"inline-flex rounded-full bg-green-500/20 px-2 text-xs font-semibold text-green-400",children:"Active"})}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>D(e),className:"text-purple-400 hover:text-purple-300 transition-colors",title:"Edit",children:(0,r.jsx)(d.A,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:()=>M(e.id,e.name),className:"text-red-400 hover:text-red-300 transition-colors",title:"Delete",children:(0,r.jsx)(i.A,{className:"h-5 w-5"})})]})})]},e.id))})]}),0===O.length&&(0,r.jsx)("div",{className:"py-12 text-center text-slate-100-secondary",children:"No stations found"})]})]})}},9946:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(2115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:d=2,absoluteStrokeWidth:i,className:n="",children:c,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:s,strokeWidth:i?24*Number(d)/Number(a):d,className:l("lucide",n),...m},[...u.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(c)?c:[c]])}),i=(e,t)=>{let s=(0,r.forwardRef)((s,o)=>{let{className:i,...n}=s;return(0,r.createElement)(d,{ref:o,iconNode:t,className:l("lucide-".concat(a(e)),i),...n})});return s.displayName="".concat(e),s}}},e=>{var t=t=>e(e.s=t);e.O(0,[135,563,521,974,441,684,358],()=>t(5049)),_N_E=e.O()}]);