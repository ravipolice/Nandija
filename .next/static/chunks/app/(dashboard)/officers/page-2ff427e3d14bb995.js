(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[324],{2525:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3717:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4616:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6463:(e,t,a)=>{Promise.resolve().then(a.bind(a,8789))},6474:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},7863:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},8789:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(5155),r=a(2115),l=a(1593),i=a(4616),o=a(7863),n=a(6474),d=a(3717),c=a(2525),m=a(6874),x=a.n(m);let u={rank:100,agid:120,name:200,mobile:120,email:200,landline:120,district:150,office:150,actions:100};function h(){let[e,t]=(0,r.useState)([]),[a,m]=(0,r.useState)([]),[h,p]=(0,r.useState)([]),[f,b]=(0,r.useState)([]),[g,v]=(0,r.useState)(!0),[k,y]=(0,r.useState)(!1),[w,j]=(0,r.useState)(""),[N,A]=(0,r.useState)("name"),[C,S]=(0,r.useState)("asc"),[M,E]=(0,r.useState)(()=>{{let e=localStorage.getItem("officerColumnWidths");return e?{...u,...JSON.parse(e)}:u}}),[D,L]=(0,r.useState)(null),[P,W]=(0,r.useState)({agid:"",rank:"",name:"",mobile:"",email:"",landline:"",district:"",office:""}),[z,O]=(0,r.useState)(!1);(0,r.useEffect)(()=>{_()},[]),(0,r.useEffect)(()=>{w?q(w):p([])},[w]);let _=async()=>{try{let[e,a,s]=await Promise.all([(0,l.Ij)(),(0,l.cM)(),(0,l.gG)()]);console.log("Loaded districts:",a),t(e),m(a),b(s),0===a.length&&console.warn("No districts found. Make sure districts exist in Firestore.")}catch(e){console.error("Error loading data:",e),alert("Failed to load data. Please check the console for details.")}finally{v(!1)}},q=async e=>{try{console.log("Loading stations for district:",e);let t=await (0,l.OT)(e);console.log("Loaded stations:",t),p(t),0===t.length&&console.warn("No stations found for district: ".concat(e))}catch(t){console.error("Error loading stations:",t),alert("Failed to load stations for ".concat(e,". Please check the console for details."))}},F=async e=>{if(confirm("Are you sure you want to delete this officer?"))try{await (0,l.Yb)(e),await _()}catch(e){console.error("Error deleting officer:",e),alert("Failed to delete officer")}},I=e=>{N===e?S("asc"===C?"desc":"asc"):(A(e),S("asc"))},R=(e,t)=>{e.preventDefault(),L(t);let a=e.pageX,s=M[t],r=e=>{let r=Math.max(50,s+(e.pageX-a));E(e=>{let a={...e,[t]:r};return localStorage.setItem("officerColumnWidths",JSON.stringify(a)),a})},l=()=>{L(null),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",l)},G=[...e].sort((e,t)=>{let a="",s="";switch(N){case"rank":a=e.rank||"",s=t.rank||"";break;case"agid":a=e.agid||"",s=t.agid||"";break;case"name":a=e.name||"",s=t.name||"";break;case"mobile":a=e.mobile||"",s=t.mobile||"";break;case"email":a=e.email||"",s=t.email||"";break;case"landline":a=e.landline||"",s=t.landline||"";break;case"district":a=e.district||"",s=t.district||"";break;case"office":a=e.office||"",s=t.office||""}let r=a.localeCompare(s);return"asc"===C?r:-r}),U=async e=>{e.preventDefault();let t=P.mobile.trim().toUpperCase();if(t&&"NM"!==t&&10!==t.length){alert("Mobile number must be 10 digits or 'NM' if not provided");return}O(!0);try{await (0,l.Zy)({agid:P.agid.trim()||void 0,rank:P.rank.trim(),name:P.name.trim(),mobile:P.mobile.trim().toUpperCase()||"",email:P.email.trim()||void 0,landline:P.landline.trim()||void 0,district:P.district,office:P.office.trim()||void 0}),W({agid:"",rank:"",name:"",mobile:"",email:"",landline:"",district:"",office:""}),j(""),p([]),y(!1),await _()}catch(e){console.error("Error creating officer:",e),alert("Failed to create officer")}finally{O(!1)}};return g?(0,s.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,s.jsx)("div",{className:"text-lg text-slate-400",children:"Loading..."})}):(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-slate-100",children:"Officers"}),(0,s.jsxs)("button",{onClick:()=>y(!k),className:"flex items-center gap-2 rounded-lg bg-primary-600 px-4 py-2 text-white transition-colors hover:bg-primary-700",children:[(0,s.jsx)(i.A,{className:"h-5 w-5"}),"Add Officer"]})]}),k&&(0,s.jsxs)("div",{className:"mb-6 rounded-lg bg-dark-card border border-dark-border p-6 shadow-lg",children:[(0,s.jsx)("h2",{className:"mb-4 text-xl font-semibold text-slate-100",children:"Add New Officer"}),(0,s.jsxs)("form",{onSubmit:U,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-400",children:"AGID"}),(0,s.jsx)("input",{type:"text",value:P.agid,onChange:e=>W({...P,agid:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-400/50",placeholder:"Auto-generated or enter manually"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-400",children:"Rank *"}),(0,s.jsxs)("select",{required:!0,value:P.rank,onChange:e=>W({...P,rank:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-400/50",children:[(0,s.jsx)("option",{value:"",children:"Select Rank"}),f.map(e=>(0,s.jsxs)("option",{value:e.equivalent_rank,children:[e.rank_label," (",e.equivalent_rank,")"]},e.rank_id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-400",children:"Name *"}),(0,s.jsx)("input",{type:"text",required:!0,value:P.name,onChange:e=>W({...P,name:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-400/50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-400",children:"Mobile *"}),(0,s.jsx)("input",{type:"text",required:!0,value:P.mobile,onChange:e=>W({...P,mobile:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-400/50",placeholder:"Enter 10 digits or 'NM' if not provided"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-400",children:"Email"}),(0,s.jsx)("input",{type:"email",value:P.email,onChange:e=>W({...P,email:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-400/50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-400",children:"Landline"}),(0,s.jsx)("input",{type:"tel",value:P.landline,onChange:e=>W({...P,landline:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-400/50",placeholder:"e.g., 08151-123456"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-400",children:"District *"}),(0,s.jsxs)("select",{required:!0,value:w,onChange:e=>{j(e.target.value),W({...P,district:e.target.value,office:""})},className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-400/50",children:[(0,s.jsx)("option",{value:"",children:"Select District"}),a.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-400",children:"Station"}),(0,s.jsxs)("select",{value:P.office,onChange:e=>W({...P,office:e.target.value}),disabled:!w,className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-400/50 disabled:bg-dark-accent-light disabled:text-slate-500",children:[(0,s.jsx)("option",{value:"",children:"Select Station"}),h.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,s.jsx)("button",{type:"submit",disabled:z,className:"rounded-lg bg-primary-600 px-6 py-2 text-white transition-colors hover:bg-primary-700 disabled:opacity-50",children:z?"Saving...":"Save Officer"}),(0,s.jsx)("button",{type:"button",onClick:()=>{y(!1),W({agid:"",rank:"",name:"",mobile:"",email:"",landline:"",district:"",office:""}),j(""),p([])},className:"rounded-lg border border-dark-border px-6 py-2 text-slate-400 transition-colors hover:bg-dark-sidebar hover:text-slate-100",children:"Cancel"})]})]})]}),(0,s.jsxs)("div",{className:"overflow-x-auto rounded-lg bg-dark-card border border-dark-border shadow-lg",style:{overflowX:"scroll",WebkitOverflowScrolling:"touch"},children:[(0,s.jsxs)("table",{className:"w-full",style:{tableLayout:"fixed",minWidth:"1200px"},children:[(0,s.jsx)("thead",{className:"bg-dark-sidebar border-b border-dark-border",children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>I("agid"),style:{width:M.agid},children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["AGID","agid"===N&&("asc"===C?(0,s.jsx)(o.A,{className:"h-4 w-4"}):(0,s.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,s.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-primary-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),R(e,"agid")}})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>I("rank"),style:{width:M.rank},children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["Rank","rank"===N&&("asc"===C?(0,s.jsx)(o.A,{className:"h-4 w-4"}):(0,s.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,s.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-primary-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),R(e,"rank")}})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>I("name"),style:{width:M.name},children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["Name","name"===N&&("asc"===C?(0,s.jsx)(o.A,{className:"h-4 w-4"}):(0,s.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,s.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-primary-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),R(e,"name")}})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>I("mobile"),style:{width:M.mobile},children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["Mobile","mobile"===N&&("asc"===C?(0,s.jsx)(o.A,{className:"h-4 w-4"}):(0,s.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,s.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-primary-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),R(e,"mobile")}})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>I("email"),style:{width:M.email},children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["Email","email"===N&&("asc"===C?(0,s.jsx)(o.A,{className:"h-4 w-4"}):(0,s.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,s.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-primary-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),R(e,"email")}})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>I("landline"),style:{width:M.landline},children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["Landline","landline"===N&&("asc"===C?(0,s.jsx)(o.A,{className:"h-4 w-4"}):(0,s.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,s.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-primary-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),R(e,"landline")}})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>I("district"),style:{width:M.district},children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["District","district"===N&&("asc"===C?(0,s.jsx)(o.A,{className:"h-4 w-4"}):(0,s.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,s.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-primary-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),R(e,"district")}})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>I("office"),style:{width:M.office},children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["Station","office"===N&&("asc"===C?(0,s.jsx)(o.A,{className:"h-4 w-4"}):(0,s.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,s.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-primary-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),R(e,"office")}})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-slate-400 relative",style:{width:M.actions},children:["Actions",(0,s.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-primary-500 bg-transparent",onMouseDown:e=>R(e,"actions")})]})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-dark-border bg-dark-card",children:G.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-dark-sidebar transition-colors",children:[(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-100 overflow-hidden text-ellipsis",style:{maxWidth:M.agid},children:e.agid||"N/A"}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-100",children:e.rank}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-100 overflow-hidden text-ellipsis",style:{maxWidth:M.name},children:e.name}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-400 overflow-hidden text-ellipsis",style:{maxWidth:M.mobile},children:e.mobile}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-400 overflow-hidden text-ellipsis",style:{maxWidth:M.email},children:e.email||"N/A"}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-400 overflow-hidden text-ellipsis",style:{maxWidth:M.landline},children:e.landline||"N/A"}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-400 overflow-hidden text-ellipsis",style:{maxWidth:M.district},children:e.district}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-400 overflow-hidden text-ellipsis",style:{maxWidth:M.office},children:e.office||"N/A"}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)(x(),{href:"/officers/edit?id=".concat(e.id),className:"text-primary-400 hover:text-primary-300",children:(0,s.jsx)(d.A,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>F(e.id),className:"text-red-400 hover:text-red-300",children:(0,s.jsx)(c.A,{className:"h-5 w-5"})})]})})]},e.id))})]}),0===G.length&&(0,s.jsx)("div",{className:"py-12 text-center text-slate-400",children:"No officers found"})]})]})}},9946:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:n,className:d="",children:c,iconNode:m,...x}=e;return(0,s.createElement)("svg",{ref:t,...i,width:r,height:r,stroke:a,strokeWidth:n?24*Number(o)/Number(r):o,className:l("lucide",d),...x},[...m.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),n=(e,t)=>{let a=(0,s.forwardRef)((a,i)=>{let{className:n,...d}=a;return(0,s.createElement)(o,{ref:i,iconNode:t,className:l("lucide-".concat(r(e)),n),...d})});return a.displayName="".concat(e),a}}},e=>{var t=t=>e(e.s=t);e.O(0,[135,563,521,874,974,441,684,358],()=>t(6463)),_N_E=e.O()}]);