(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[228],{2525:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3717:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4616:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5539:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(5155),r=s(2115),l=s(1593),o=s(4616);let i=(0,s(9946).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var c=s(7863),n=s(6474),d=s(3717),p=s(2525),m=s(6874),h=s.n(m);let x={photo:80,kgid:120,name:200,rank:100,email:200,mobile1:120,mobile2:120,bloodGroup:120,district:150,station:150,status:100,actions:100};function u(){let[e,t]=(0,r.useState)([]),[s,m]=(0,r.useState)(!0),[u,w]=(0,r.useState)(""),[g,v]=(0,r.useState)("name"),[b,f]=(0,r.useState)("asc"),[y,N]=(0,r.useState)(()=>{{let e=localStorage.getItem("employeeColumnWidths");return e?{...x,...JSON.parse(e)}:x}}),[k,j]=(0,r.useState)(null);(0,r.useEffect)(()=>{A()},[]);let A=async()=>{try{let e=await (0,l.Oc)();t(e)}catch(e){console.error("Error loading employees:",e)}finally{m(!1)}},C=async e=>{if(confirm("Are you sure you want to delete this employee?"))try{await (0,l.Qu)(e),await A()}catch(e){console.error("Error deleting employee:",e),alert("Failed to delete employee")}},L=e=>{g===e?f("asc"===b?"desc":"asc"):(v(e),f("asc"))},E=(e,t)=>{e.preventDefault(),j(t);let s=e.pageX,a=y[t],r=e=>{let r=Math.max(50,a+(e.pageX-s));N(e=>{let s={...e,[t]:r};return localStorage.setItem("employeeColumnWidths",JSON.stringify(s)),s})},l=()=>{j(null),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",l)},M=e.filter(e=>{var t,s,a,r,l,o;return e.name.toLowerCase().includes(u.toLowerCase())||e.kgid.toLowerCase().includes(u.toLowerCase())||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(u.toLowerCase()))||(null===(s=e.mobile1)||void 0===s?void 0:s.toLowerCase().includes(u.toLowerCase()))||(null===(a=e.mobile2)||void 0===a?void 0:a.toLowerCase().includes(u.toLowerCase()))||(null===(r=e.rank)||void 0===r?void 0:r.toLowerCase().includes(u.toLowerCase()))||(null===(l=e.displayRank)||void 0===l?void 0:l.toLowerCase().includes(u.toLowerCase()))||(null===(o=e.bloodGroup)||void 0===o?void 0:o.toLowerCase().includes(u.toLowerCase()))||e.district.toLowerCase().includes(u.toLowerCase())||e.station.toLowerCase().includes(u.toLowerCase())}).sort((e,t)=>{let s="",a="";switch(g){case"kgid":s=e.kgid||"",a=t.kgid||"";break;case"name":s=e.name||"",a=t.name||"";break;case"rank":s=e.displayRank||e.rank||"",a=t.displayRank||t.rank||"";break;case"email":s=e.email||"",a=t.email||"";break;case"mobile1":s=e.mobile1||"",a=t.mobile1||"";break;case"mobile2":s=e.mobile2||"",a=t.mobile2||"";break;case"bloodGroup":s=e.bloodGroup||"",a=t.bloodGroup||"";break;case"district":s=e.district||"",a=t.district||"";break;case"station":s=e.station||"",a=t.station||"";break;case"isApproved":s=+!!e.isApproved,a=+!!t.isApproved}if("string"==typeof s&&"string"==typeof a){let e=s.localeCompare(a);return"asc"===b?e:-e}{let e=s-a;return"asc"===b?e:-e}});return s?(0,a.jsx)("div",{className:"flex h-screen items-center justify-center bg-gradient-dark",children:(0,a.jsx)("div",{className:"text-lg text-slate-400",children:"Loading..."})}):(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"Employees"}),(0,a.jsxs)(h(),{href:"/employees/new",className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-purple-600 to-blue-600 px-4 py-2 text-white transition-all hover:shadow-lg hover:shadow-purple-500/50",children:[(0,a.jsx)(o.A,{className:"h-5 w-5"}),"Add Employee"]})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-slate-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search employees...",value:u,onChange:e=>w(e.target.value),className:"w-full rounded-lg bg-dark-card border border-dark-border py-2 pl-10 pr-4 text-slate-100 placeholder-slate-400 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50"})]})}),(0,a.jsxs)("div",{className:"overflow-x-auto rounded-lg bg-dark-card border border-dark-border shadow-lg",style:{overflowX:"scroll",WebkitOverflowScrolling:"touch"},children:[(0,a.jsxs)("table",{className:"w-full",style:{tableLayout:"fixed",minWidth:"1200px"},children:[(0,a.jsx)("thead",{className:"bg-dark-sidebar border-b border-dark-border",children:(0,a.jsxs)("tr",{children:[(0,a.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 relative",style:{width:y.photo},children:["Photo",(0,a.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-purple-500 bg-transparent",onMouseDown:e=>E(e,"photo"),style:{cursor:"col-resize"}})]}),(0,a.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>L("kgid"),style:{width:y.kgid},children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["KGID","kgid"===g&&("asc"===b?(0,a.jsx)(c.A,{className:"h-4 w-4"}):(0,a.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,a.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-purple-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),E(e,"kgid")}})]}),(0,a.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>L("name"),style:{width:y.name},children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Name","name"===g&&("asc"===b?(0,a.jsx)(c.A,{className:"h-4 w-4"}):(0,a.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,a.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-purple-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),E(e,"name")}})]}),(0,a.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>L("rank"),style:{width:y.rank},children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Rank","rank"===g&&("asc"===b?(0,a.jsx)(c.A,{className:"h-4 w-4"}):(0,a.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,a.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-purple-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),E(e,"rank")}})]}),(0,a.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>L("email"),style:{width:y.email},children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Email","email"===g&&("asc"===b?(0,a.jsx)(c.A,{className:"h-4 w-4"}):(0,a.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,a.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-purple-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),E(e,"email")}})]}),(0,a.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>L("mobile1"),style:{width:y.mobile1},children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Mobile 1","mobile1"===g&&("asc"===b?(0,a.jsx)(c.A,{className:"h-4 w-4"}):(0,a.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,a.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-purple-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),E(e,"mobile1")}})]}),(0,a.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>L("mobile2"),style:{width:y.mobile2},children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Mobile 2","mobile2"===g&&("asc"===b?(0,a.jsx)(c.A,{className:"h-4 w-4"}):(0,a.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,a.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-purple-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),E(e,"mobile2")}})]}),(0,a.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>L("bloodGroup"),style:{width:y.bloodGroup},children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Blood Group","bloodGroup"===g&&("asc"===b?(0,a.jsx)(c.A,{className:"h-4 w-4"}):(0,a.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,a.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-purple-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),E(e,"bloodGroup")}})]}),(0,a.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>L("district"),style:{width:y.district},children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["District","district"===g&&("asc"===b?(0,a.jsx)(c.A,{className:"h-4 w-4"}):(0,a.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,a.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-purple-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),E(e,"district")}})]}),(0,a.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>L("station"),style:{width:y.station},children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Station","station"===g&&("asc"===b?(0,a.jsx)(c.A,{className:"h-4 w-4"}):(0,a.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,a.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-purple-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),E(e,"station")}})]}),(0,a.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-400 cursor-pointer hover:bg-dark-card select-none relative",onClick:()=>L("isApproved"),style:{width:y.status},children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Status","isApproved"===g&&("asc"===b?(0,a.jsx)(c.A,{className:"h-4 w-4"}):(0,a.jsx)(n.A,{className:"h-4 w-4"}))]}),(0,a.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-purple-500 bg-transparent",onMouseDown:e=>{e.stopPropagation(),E(e,"status")}})]}),(0,a.jsxs)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 relative",style:{width:y.actions},children:["Actions",(0,a.jsx)("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-purple-500 bg-transparent",onMouseDown:e=>E(e,"actions")})]})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-dark-border bg-dark-card",children:M.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-dark-sidebar transition-colors",children:[(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,a.jsx)("div",{className:"flex items-center",children:e.photoUrl||e.photoUrlFromGoogle?(0,a.jsx)("img",{src:e.photoUrl||e.photoUrlFromGoogle||"",alt:e.name,className:"h-12 w-12 rounded-full object-cover",loading:"lazy",referrerPolicy:"no-referrer",onError:t=>{let s=t.currentTarget;if(!s.dataset.failed){s.dataset.failed="1";let t=e.photoUrl||e.photoUrlFromGoogle||"",a=null;if(t.includes("lh3.googleusercontent.com")){let e=t.match(/\/d\/([-\w]{25,})/);e&&(a=e[1])}if(!a&&t.includes("drive.google.com")){let e=t.match(/[?&]id=([-\w]{25,})/);e&&(a=e[1])}if(!a&&t.includes("/file/d/")){let e=t.match(/\/file\/d\/([-\w]{25,})/);e&&(a=e[1])}if(a){if(s.dataset.retried){if(!s.dataset.retried2){s.dataset.retried2="1",s.src="https://drive.google.com/uc?export=view&id=".concat(a);return}}else{s.dataset.retried="1",s.src="https://drive.google.com/thumbnail?id=".concat(a,"&sz=w200");return}}s.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48'%3E%3Ccircle cx='24' cy='24' r='24' fill='%23e5e7eb'/%3E%3Ctext x='50%25' y='50%25' font-family='Arial' font-size='18' fill='%239ca3af' text-anchor='middle' dominant-baseline='middle'%3E"+(e.name.charAt(0).toUpperCase()||"?")+"%3C/text%3E%3C/svg%3E"}}}):(0,a.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-dark-sidebar text-slate-400 font-semibold",children:e.name.charAt(0).toUpperCase()||"?"})})}),(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-100 overflow-hidden text-ellipsis",style:{maxWidth:y.kgid},children:e.kgid}),(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-100 overflow-hidden text-ellipsis",style:{maxWidth:y.name},children:e.name}),(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-400 overflow-hidden text-ellipsis",style:{maxWidth:y.rank},children:e.displayRank||e.rank||"N/A"}),(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-400 overflow-hidden text-ellipsis",style:{maxWidth:y.email},children:e.email||"N/A"}),(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-400 overflow-hidden text-ellipsis",style:{maxWidth:y.mobile1},children:e.mobile1}),(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-400 overflow-hidden text-ellipsis",style:{maxWidth:y.mobile2},children:e.mobile2||"N/A"}),(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-400 overflow-hidden text-ellipsis",style:{maxWidth:y.bloodGroup},children:e.bloodGroup||"N/A"}),(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-400 overflow-hidden text-ellipsis",style:{maxWidth:y.district},children:e.district}),(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-400 overflow-hidden text-ellipsis",style:{maxWidth:y.station},children:e.station}),(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,a.jsx)("span",{className:"inline-flex rounded-full px-2 text-xs font-semibold ".concat(e.isApproved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.isApproved?"Approved":"Pending"})}),(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)(h(),{href:"/employees/edit?id=".concat(e.id),className:"text-purple-400 hover:text-purple-300 transition-colors",children:(0,a.jsx)(d.A,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>C(e.id),className:"text-red-400 hover:text-red-300 transition-colors",children:(0,a.jsx)(p.A,{className:"h-5 w-5"})})]})})]},e.id))})]}),0===M.length&&(0,a.jsx)("div",{className:"py-12 text-center text-slate-400",children:"No employees found"})]})]})}},6474:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},7863:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},9946:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:n="",children:d,iconNode:p,...m}=e;return(0,a.createElement)("svg",{ref:t,...o,width:r,height:r,stroke:s,strokeWidth:c?24*Number(i)/Number(r):i,className:l("lucide",n),...m},[...p.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let s=(0,a.forwardRef)((s,o)=>{let{className:c,...n}=s;return(0,a.createElement)(i,{ref:o,iconNode:t,className:l("lucide-".concat(r(e)),c),...n})});return s.displayName="".concat(e),s}},9999:(e,t,s)=>{Promise.resolve().then(s.bind(s,5539))}},e=>{var t=t=>e(e.s=t);e.O(0,[135,563,521,874,974,441,684,358],()=>t(9999)),_N_E=e.O()}]);