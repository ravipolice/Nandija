(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{1801:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),a=r(2115),l=r(1593),i=r(4616),o=r(3717),n=r(2525);let d={rank_id:140,rank_label:280,staffType:140,equivalent_rank:150,category:150,requiresMetal:120,seniority_order:120,status:120,actions:120};function c(){let[e,t]=(0,a.useState)([]),[r,c]=(0,a.useState)(!0),[u,p]=(0,a.useState)(!1),[x,m]=(0,a.useState)(null),[h,b]=(0,a.useState)({rank_id:"",rank_label:"",staffType:"POLICE",category:"BOTH",equivalent_rank:"",seniority_order:"",aliases:"",requiresMetalNumber:!1,isActive:!0,remarks:""}),[f,y]=(0,a.useState)(!1),[g,k]=(0,a.useState)(()=>{{let e=localStorage.getItem("rankColumnWidths");return e?{...d,...JSON.parse(e)}:d}}),[v,N]=(0,a.useState)(null);(0,a.useEffect)(()=>{w()},[]);let w=async()=>{try{let e=await (0,l.gG)();console.log("Loaded ranks:",e),t(e),0===e.length&&console.warn("No ranks found. Make sure ranks exist in Firestore.")}catch(e){console.error("Error loading ranks:",e),alert("Failed to load ranks. Please check the console for details.")}finally{c(!1)}},j=e=>{var t;m(e.rank_id),b({rank_id:e.rank_id,rank_label:e.rank_label,staffType:e.staffType||"POLICE",category:e.category,equivalent_rank:e.equivalent_rank,seniority_order:e.seniority_order.toString(),aliases:(null===(t=e.aliases)||void 0===t?void 0:t.join(", "))||"",requiresMetalNumber:e.requiresMetalNumber,isActive:e.isActive,remarks:e.remarks||""}),p(!0)},_=async(e,t)=>{if(confirm('Are you sure you want to delete "'.concat(t,'"?')))try{await (0,l.sR)(e),await w()}catch(e){console.error("Error deleting rank:",e),alert("Failed to delete rank")}},I=()=>{p(!1),m(null),b({rank_id:"",rank_label:"",staffType:"POLICE",category:"BOTH",equivalent_rank:"",seniority_order:"",aliases:"",requiresMetalNumber:!1,isActive:!0,remarks:""})},C=(e,t)=>{e.preventDefault(),N(t);let r=e.pageX,s=g[t],a=e=>{let a=Math.max(50,s+(e.pageX-r));k(e=>{let r={...e,[t]:a};return localStorage.setItem("rankColumnWidths",JSON.stringify(r)),r})},l=()=>{N(null),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",l)},E=async e=>{e.preventDefault(),y(!0);try{let e=h.aliases.split(",").map(e=>e.trim()).filter(e=>e.length>0),t=h.staffType;if("POLICE"===t&&!h.equivalent_rank.trim()){alert("Equivalent Rank is required for POLICE staff."),y(!1);return}let r={rank_id:h.rank_id.trim(),rank_label:h.rank_label.trim(),staffType:t,category:h.category,equivalent_rank:"POLICE"===t?h.equivalent_rank.trim():"",seniority_order:parseInt(h.seniority_order,10),aliases:e,requiresMetalNumber:"POLICE"===t&&h.requiresMetalNumber,isActive:h.isActive,remarks:h.remarks.trim()||void 0};if(x){let{rank_id:e,...t}=r;await (0,l.cs)(e,t)}else await (0,l.vC)(r);I(),await w()}catch(e){console.error("Error saving rank:",e),alert("Failed to ".concat(x?"update":"create"," rank: ").concat(e instanceof Error?e.message:"Unknown error"))}finally{y(!1)}};return r?(0,s.jsx)("div",{className:"flex h-screen items-center justify-center bg-gradient-dark",children:(0,s.jsx)("div",{className:"text-lg text-slate-100-secondary",children:"Loading..."})}):(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"Ranks"}),(0,s.jsxs)("button",{onClick:()=>p(!u),className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-purple-600 to-blue-600 px-4 py-2 text-white transition-all hover:shadow-lg hover:shadow-purple-500/50",children:[(0,s.jsx)(i.A,{className:"h-5 w-5"}),"Add Rank"]})]}),u&&(0,s.jsxs)("div",{className:"mb-6 rounded-lg bg-dark-card border border-dark-border p-6 shadow-lg",children:[(0,s.jsx)("h2",{className:"mb-4 text-xl font-semibold text-slate-100",children:x?"Edit Rank":"Add New Rank"}),(0,s.jsxs)("form",{onSubmit:E,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-slate-100-secondary",children:["Rank ID * ",x&&(0,s.jsx)("span",{className:"text-xs text-slate-500",children:"(Immutable)"})]}),(0,s.jsx)("input",{type:"text",required:!0,disabled:!!x,value:h.rank_id,onChange:e=>b({...h,rank_id:e.target.value.toUpperCase().replace(/\s+/g,"_")}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"e.g., DG_IGP, DSP, PSI"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-100-secondary",children:"Staff Type *"}),(0,s.jsxs)("select",{required:!0,value:h.staffType,onChange:e=>b({...h,staffType:e.target.value,requiresMetalNumber:"POLICE"===e.target.value&&h.requiresMetalNumber}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50",children:[(0,s.jsx)("option",{value:"POLICE",children:"POLICE"}),(0,s.jsx)("option",{value:"MINISTERIAL",children:"MINISTERIAL"})]}),"MINISTERIAL"===h.staffType&&(0,s.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"Equivalent rank not applicable; metal number disabled."})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-100-secondary",children:"Rank Label *"}),(0,s.jsx)("input",{type:"text",required:!0,value:h.rank_label,onChange:e=>b({...h,rank_label:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"e.g., Director General & Inspector General of Police"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-100-secondary",children:"Equivalent Rank *"}),(0,s.jsx)("input",{type:"text",required:"POLICE"===h.staffType,disabled:"MINISTERIAL"===h.staffType,value:h.equivalent_rank,onChange:e=>b({...h,equivalent_rank:e.target.value.toUpperCase()}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50 disabled:bg-dark-border/40 disabled:text-slate-500",placeholder:"e.g., DG, DSP, PSI"}),"MINISTERIAL"===h.staffType&&(0,s.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"Not required for ministerial staff."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-100-secondary",children:"Category *"}),(0,s.jsxs)("select",{required:!0,value:h.category,onChange:e=>b({...h,category:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50",children:[(0,s.jsx)("option",{value:"BOTH",children:"BOTH"}),(0,s.jsx)("option",{value:"DISTRICT",children:"DISTRICT"}),(0,s.jsx)("option",{value:"COMMISSIONERATE",children:"COMMISSIONERATE"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-100-secondary",children:"Seniority Order *"}),(0,s.jsx)("input",{type:"number",required:!0,min:"1",value:h.seniority_order,onChange:e=>b({...h,seniority_order:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"1 = highest"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-100-secondary",children:"Aliases (comma-separated)"}),(0,s.jsx)("input",{type:"text",value:h.aliases,onChange:e=>b({...h,aliases:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50",placeholder:"e.g., DYSP, SDPO, PSIW, WPSI"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"Separate multiple aliases with commas"})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:"POLICE"===h.staffType&&h.requiresMetalNumber,onChange:e=>b({...h,requiresMetalNumber:e.target.checked}),disabled:"POLICE"!==h.staffType,className:"w-5 h-5 rounded border-dark-border bg-dark-sidebar text-purple-600 focus:ring-purple-500 focus:ring-2 disabled:opacity-50"}),(0,s.jsx)("span",{className:"text-sm font-medium text-slate-100-secondary",children:"Requires Metal Number"})]})}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:h.isActive,onChange:e=>b({...h,isActive:e.target.checked}),className:"w-5 h-5 rounded border-dark-border bg-dark-sidebar text-purple-600 focus:ring-purple-500 focus:ring-2"}),(0,s.jsx)("span",{className:"text-sm font-medium text-slate-100-secondary",children:"Is Active"})]})}),(0,s.jsxs)("div",{className:"md:col-span-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-100-secondary",children:"Remarks"}),(0,s.jsx)("textarea",{value:h.remarks,onChange:e=>b({...h,remarks:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50",rows:2,placeholder:"Optional admin notes"})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,s.jsx)("button",{type:"submit",disabled:f,className:"rounded-lg bg-gradient-to-r from-purple-600 to-blue-600 px-6 py-2 text-white transition-all hover:shadow-lg hover:shadow-purple-500/50 disabled:opacity-50",children:f?"Saving...":"Save Rank"}),(0,s.jsx)("button",{type:"button",onClick:I,className:"rounded-lg border border-dark-border px-6 py-2 text-slate-100-secondary transition-colors hover:bg-dark-sidebar hover:text-slate-100",children:"Cancel"})]})]})]}),(0,s.jsxs)("div",{className:"overflow-x-auto rounded-lg bg-dark-card border border-dark-border shadow-lg",style:{overflowX:"scroll",WebkitOverflowScrolling:"touch"},children:[(0,s.jsxs)("table",{className:"w-full",style:{tableLayout:"fixed"},children:[(0,s.jsx)("thead",{className:"bg-dark-sidebar border-b border-dark-border",children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:g.rank_id},children:["Rank ID",(0,s.jsx)("div",{onMouseDown:e=>C(e,"rank_id"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:g.rank_label},children:["Rank Label",(0,s.jsx)("div",{onMouseDown:e=>C(e,"rank_label"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:g.staffType},children:["Staff",(0,s.jsx)("div",{onMouseDown:e=>C(e,"staffType"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:g.equivalent_rank},children:["Equivalent",(0,s.jsx)("div",{onMouseDown:e=>C(e,"equivalent_rank"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:g.category},children:["Category",(0,s.jsx)("div",{onMouseDown:e=>C(e,"category"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:g.requiresMetal},children:["Metal #",(0,s.jsx)("div",{onMouseDown:e=>C(e,"requiresMetal"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:g.seniority_order},children:["Order",(0,s.jsx)("div",{onMouseDown:e=>C(e,"seniority_order"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:g.status},children:["Status",(0,s.jsx)("div",{onMouseDown:e=>C(e,"status"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:g.actions},children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-dark-border bg-dark-card",children:e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-dark-sidebar transition-colors",children:[(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-100-secondary overflow-hidden text-ellipsis",style:{maxWidth:g.rank_id},children:e.rank_id}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-100 overflow-hidden text-ellipsis",style:{maxWidth:g.rank_label},children:e.rank_label}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-100-secondary overflow-hidden text-ellipsis",style:{maxWidth:g.staffType},children:e.staffType||"POLICE"}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-100-secondary overflow-hidden text-ellipsis",style:{maxWidth:g.equivalent_rank},children:e.equivalent_rank}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-100-secondary overflow-hidden text-ellipsis",style:{maxWidth:g.category},children:e.category}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-100-secondary overflow-hidden text-ellipsis",style:{maxWidth:g.requiresMetal},children:e.requiresMetalNumber?(0,s.jsx)("span",{className:"inline-flex rounded-full bg-amber-500/20 px-2 text-xs font-semibold text-amber-400",children:"Yes"}):(0,s.jsx)("span",{className:"text-slate-500",children:"No"})}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-100-secondary overflow-hidden text-ellipsis",style:{maxWidth:g.seniority_order},children:e.seniority_order}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 overflow-hidden text-ellipsis",style:{maxWidth:g.status},children:e.isActive?(0,s.jsx)("span",{className:"inline-flex rounded-full bg-green-500/20 px-2 text-xs font-semibold text-green-400",children:"Active"}):(0,s.jsx)("span",{className:"inline-flex rounded-full bg-red-500/20 px-2 text-xs font-semibold text-red-400",children:"Inactive"})}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>j(e),className:"text-purple-400 hover:text-purple-300 transition-colors",title:"Edit",children:(0,s.jsx)(o.A,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>_(e.rank_id,e.rank_label),className:"text-red-400 hover:text-red-300 transition-colors",title:"Delete",children:(0,s.jsx)(n.A,{className:"h-5 w-5"})})]})})]},e.rank_id))})]}),0===e.length&&(0,s.jsx)("div",{className:"py-12 text-center text-slate-100-secondary",children:"No ranks found"})]})]})}},2525:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2933:(e,t,r)=>{Promise.resolve().then(r.bind(r,1801))},3717:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4616:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(2115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:n,className:d="",children:c,iconNode:u,...p}=e;return(0,s.createElement)("svg",{ref:t,...i,width:a,height:a,stroke:r,strokeWidth:n?24*Number(o)/Number(a):o,className:l("lucide",d),...p},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),n=(e,t)=>{let r=(0,s.forwardRef)((r,i)=>{let{className:n,...d}=r;return(0,s.createElement)(o,{ref:i,iconNode:t,className:l("lucide-".concat(a(e)),n),...d})});return r.displayName="".concat(e),r}}},e=>{var t=t=>e(e.s=t);e.O(0,[135,563,521,974,441,684,358],()=>t(2933)),_N_E=e.O()}]);