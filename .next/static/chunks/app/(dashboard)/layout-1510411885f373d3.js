(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{2171:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,AuthProvider:()=>l});var a=r(5155),n=r(2115),s=r(9490);let i=(0,n.createContext)({user:null,loading:!0});function l(e){let{children:t}=e,[r,l]=(0,n.useState)(null),[o,c]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{try{let e=(0,s.Yk)(e=>{l(e),c(!1)});return()=>e()}catch(e){console.error("Error initializing auth:",e),c(!1)}},[]),(0,a.jsx)(i.Provider,{value:{user:r,loading:o},children:t})}let o=()=>(0,n.useContext)(i)},3227:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s,r:()=>i});var a=r(2596),n=r(9688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}function i(e){return e?("string"==typeof e?new Date(e):e).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}},4516:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},5525:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},5670:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},6498:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});var a=r(5155),n=r(2115),s=r(5525);function i(e){let{size:t="md",className:r=""}=e,[i,l]=(0,n.useState)(!1),o={sm:"h-10 w-10",md:"h-20 w-20",lg:"h-32 w-32"};return i?(0,a.jsx)("div",{className:"flex ".concat(o[t]," items-center justify-center rounded-full bg-primary-600 ").concat(r),children:(0,a.jsx)(s.A,{className:"".concat({sm:"h-5 w-5",md:"h-10 w-10",lg:"h-16 w-16"}[t]," text-white")})}):(0,a.jsx)("img",{src:"/logo.png",alt:"PMD Logo",className:"".concat(o[t]," object-contain ").concat(r),onError:()=>{console.log("Logo load error (".concat(t,"): local logo not found")),l(!0)},onLoad:()=>{console.log("Logo loaded successfully (".concat(t,")"))}})}},7213:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},7434:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},7580:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8164:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},8359:(e,t,r)=>{Promise.resolve().then(r.bind(r,8971))},8971:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var a=r(5155),n=r(2171),s=r(6874),i=r.n(s),l=r(5695),o=r(2115),c=r(9946);let d=(0,c.A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var h=r(7580),u=r(5670),y=r(5525);let x=(0,c.A)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var p=r(4516),m=r(3227);let f=(0,c.A)("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var g=r(7434),k=r(7213),v=r(8164),b=r(9869);let A=(0,c.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var w=r(9490),j=r(1593),N=r(3999),M=r(6498);let P=[{name:"Dashboard",href:"/",icon:d},{name:"Employees",href:"/employees",icon:h.A},{name:"Pending Approvals",href:"/approvals",icon:u.A},{name:"Officers",href:"/officers",icon:y.A},{name:"Ranks",href:"/ranks",icon:x},{name:"Districts",href:"/districts",icon:p.A},{name:"Stations",href:"/stations",icon:m.A},{name:"Notifications",href:"/notifications",icon:f},{name:"Documents",href:"/documents",icon:g.A},{name:"Gallery",href:"/gallery",icon:k.A},{name:"Useful Links",href:"/links",icon:v.A},{name:"CSV Upload",href:"/upload",icon:b.A}];function E(){let e=(0,l.usePathname)(),{user:t}=(0,n.A)(),[r,s]=(0,o.useState)(0);(0,o.useEffect)(()=>{let e=async()=>{try{let e=await (0,j.wz)();s(e.length)}catch(e){(null==e?void 0:e.code)!=="permission-denied"&&(null==e?void 0:e.code)!=="unavailable"&&console.warn("Error fetching pending count:",(null==e?void 0:e.message)||e),s(0)}};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[]);let c=async()=>{try{await (0,w.CI)(),window.location.href="/login"}catch(e){console.error("Error signing out:",e)}};return(0,a.jsxs)("div",{className:"flex h-screen w-64 flex-col bg-dark-sidebar text-dark-text border-r border-dark-border",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center border-b border-dark-border px-4 py-6 bg-gradient-to-br from-purple-900/20 to-blue-900/20",children:[(0,a.jsx)(M.g,{size:"md",className:"mb-4"}),(0,a.jsx)("h1",{className:"text-lg font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"PMD Admin"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-dark-text-secondary",children:"Admin Panel"}),(0,a.jsx)("div",{className:"mt-2 text-[10px] text-slate-500 opacity-60",children:"v2.2-PagesAPI"})]}),(0,a.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4 overflow-y-auto",children:P.map(t=>{let n=e===t.href,s="Pending Approvals"===t.name&&r>0;return(0,a.jsxs)(i(),{href:t.href,className:(0,N.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-all relative group",n?"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg shadow-purple-500/50":"text-dark-text-secondary hover:bg-dark-card hover:text-dark-text"),children:[(0,a.jsx)(t.icon,{className:(0,N.cn)("h-5 w-5 transition-colors",n?"text-white":"text-dark-text-secondary group-hover:text-purple-400")}),(0,a.jsx)("span",{className:"flex-1",children:t.name}),s&&(0,a.jsx)("span",{className:(0,N.cn)("flex items-center justify-center min-w-[20px] h-5 px-1.5 rounded-full text-xs font-bold",n?"bg-white text-purple-600":"bg-red-500 text-white"),children:r>99?"99+":r})]},t.name)})}),(0,a.jsxs)("div",{className:"border-t border-dark-border p-4 bg-dark-card",children:[(0,a.jsx)("div",{className:"mb-2 text-sm text-dark-text-secondary",children:null==t?void 0:t.email}),(0,a.jsxs)("button",{onClick:c,className:"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium text-dark-text-secondary transition-colors hover:bg-dark-card hover:text-dark-text",children:[(0,a.jsx)(A,{className:"h-5 w-5"}),"Sign Out"]})]})]})}function C(e){let{children:t}=e,{user:r,loading:s}=(0,n.A)(),i=(0,l.useRouter)();return((0,o.useEffect)(()=>{s||r||i.push("/login")},[r,s,i]),s)?(0,a.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,a.jsx)("div",{className:"text-lg text-gray-600",children:"Loading..."})}):r?(0,a.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gradient-dark",children:[(0,a.jsx)(E,{}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto bg-gradient-dark",children:t})]}):null}},9490:(e,t,r)=>{"use strict";r.d(t,{CI:()=>l,G6:()=>i,Yk:()=>o});var a=r(5404),n=r(1138);let s=new a.HF,i=async()=>{if(!n.j2)throw Error("Firebase Auth not initialized");try{return(await (0,a.df)(n.j2,s)).user}catch(e){throw console.error("Error signing in:",e),e}},l=async()=>{if(!n.j2)throw Error("Firebase Auth not initialized");try{await (0,a.CI)(n.j2)}catch(e){throw console.error("Error signing out:",e),e}},o=e=>n.j2?(0,a.hg)(n.j2,e):(e(null),()=>{})},9869:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[135,563,521,598,874,974,441,684,358],()=>t(8359)),_N_E=e.O()}]);