(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[827],{890:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var o=r(5155),a=r(2115),l=r(1593);async function n(){try{let e=[];try{let{getDocumentsList:t}=await Promise.resolve().then(r.bind(r,1593));e=(await t()).map(e=>{var t,r;return{id:e.id,title:e.title||e.name||"Untitled Document",url:e.url||e.URL||"",category:e.category||e.Category,uploadedBy:e.uploadedBy||e.UploadedBy,uploadedDate:e.uploadedDate||e.UploadedDate||((null===(t=e.createdAt)||void 0===t?void 0:t.toDate)?e.createdAt.toDate().toISOString():void 0),description:e.description||e.Description,fileId:e.fileId,fileType:e.fileType||e.type,name:e.name||e.title,type:e.type||e.fileType,createdAt:(null===(r=e.createdAt)||void 0===r?void 0:r.toDate)?e.createdAt.toDate():e.createdAt?new Date(e.createdAt):void 0}}),console.log("Found ".concat(e.length," documents in Firestore"))}catch(e){console.warn("Error fetching from Firestore:",(null==e?void 0:e.message)||"Unknown")}let t=[];try{let e="/api/documents";console.log("Fetching from API route:",e);let r=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(console.log("API Response Status:",r.status,r.statusText),console.log("API Response OK:",r.ok),r.ok){let e=await r.json();console.log("API Response Data Type:",Array.isArray(e)?"array":typeof e),console.log("API Response Data:",e),t=Array.isArray(e)?e:(null==e?void 0:e.data)||(null==e?void 0:e.documents)||(null==e?void 0:e.items)||[],console.log("Found ".concat(t.length," documents from Apps Script API"))}else{let e=await r.text().catch(()=>"Could not read error");console.error("API Route Error Response:",r.status,e)}}catch(e){console.error("Error fetching from Apps Script API:",(null==e?void 0:e.message)||"Unknown"),console.error("Error details:",{name:null==e?void 0:e.name,message:null==e?void 0:e.message,stack:null==e?void 0:e.stack})}let o=new Map;e.forEach(e=>{e.url&&o.set(e.url,e)}),t.forEach(e=>{let t=e.URL||e.url;t&&!o.has(t)&&o.set(t,e)});let a=Array.from(o.values());if(!Array.isArray(a))return console.warn("Combined documents is not an array"),[];let l=a.map(e=>{let t=e.Delete||e.delete||"";return"deleted"===t.toString().toLowerCase()?null:{id:e.id||e.fileId||void 0,title:e.Title||e.title||e.name||"Untitled Document",url:e.URL||e.url||"",category:e.Category||e.category||void 0,uploadedBy:e.UploadedBy||e.uploadedBy||void 0,uploadedDate:e.UploadedDate||e.uploadedDate||void 0,description:e.Description||e.description||void 0,fileId:e.fileId||void 0,fileType:e.fileType||void 0,name:e.Title||e.title||e.name||"Untitled Document",type:e.fileType||e.Category||e.category||void 0,createdAt:e.UploadedDate?new Date(e.UploadedDate):e.createdAt?e.createdAt.toDate?e.createdAt.toDate():new Date(e.createdAt):void 0}}).filter(e=>null!==e);return l.sort((e,t)=>{var r,o;let a=(null===(r=e.createdAt)||void 0===r?void 0:r.getTime())||(e.uploadedDate?new Date(e.uploadedDate).getTime():0);return((null===(o=t.createdAt)||void 0===o?void 0:o.getTime())||(t.uploadedDate?new Date(t.uploadedDate).getTime():0))-a}),l}catch(e){throw console.error("Error fetching documents:",e),Error("Failed to fetch documents: ".concat((null==e?void 0:e.message)||"Unknown error"))}}async function i(e,t,r){try{let o=await fetch("/api/documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"deleteDocument",title:e,fileId:r,userEmail:t})});if(!o.ok){let e=await o.json().catch(()=>({error:"Unknown error"}));throw Error(e.error||"Failed to delete document: ".concat(o.status))}let a=await o.json();if(!a.success)throw Error(a.error||"Failed to delete document")}catch(e){throw console.error("Error deleting document:",e),Error("Failed to delete document: ".concat((null==e?void 0:e.message)||"Unknown error"))}}var s=r(2171),d=r(4616),c=r(8164),u=r(9869),m=r(7434);let p=(0,r(9946).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var g=r(1788),y=r(2525),x=r(3786),h=r(3999);function f(){let{user:e}=(0,s.A)(),[t,r]=(0,a.useState)([]),[f,v]=(0,a.useState)(!0),[b,w]=(0,a.useState)("url"),[j,N]=(0,a.useState)("gdrive"),[k,A]=(0,a.useState)(!1),[D,C]=(0,a.useState)({name:"",url:"",type:"",category:"",description:""}),[S,U]=(0,a.useState)(null),[E,T]=(0,a.useState)(0),[I,F]=(0,a.useState)(!1),[P,M]=(0,a.useState)(null);(0,a.useEffect)(()=>{O()},[]);let O=async()=>{try{console.log("Loading documents..."),console.log("Environment:","production"),console.log("API Base URL:",window.location.origin);let e=await n();if(console.log("Loaded documents:",e),console.log("Number of documents:",e.length),e.length>0&&console.log("First document sample:",JSON.stringify(e[0],null,2)),r(e),0===e.length){console.warn("No documents found. Make sure documents exist in the Google Sheet."),console.warn("Check browser console for detailed error messages."),console.warn("Testing API route directly...");try{let e=await fetch("/api/documents");console.log("API Route Status:",e.status);let t=await e.json();console.log("API Route Response:",t)}catch(e){console.error("API Route Test Failed:",e)}}}catch(e){console.error("Error loading documents:",e),console.error("Error details:",{message:null==e?void 0:e.message,code:null==e?void 0:e.code,stack:null==e?void 0:e.stack}),null==e||e.message,console.error("Full error:",e)}finally{v(!1)}},R=async t=>{t.preventDefault(),F(!0);try{await (0,l.ui)({name:D.name.trim(),title:D.name.trim(),url:D.url.trim(),URL:D.url.trim(),type:D.type.trim()||void 0,fileType:D.type.trim()||void 0,category:D.category.trim()||void 0,description:D.description.trim()||void 0,uploadedBy:(null==e?void 0:e.email)||void 0,uploadedDate:new Date().toISOString()}),C({name:"",url:"",type:"",category:"",description:""}),A(!1),await O()}catch(e){console.error("Error creating document:",e),alert("Failed to create document")}finally{F(!1)}},L=async t=>{if(t.preventDefault(),!S){alert("Please select a file to upload");return}F(!0),T(0);try{let t=S.type||q(S.name),r=setInterval(()=>{T(e=>e>=90?(clearInterval(r),90):e+10)},200);if("firebase"===j){let o=await B(S),a=await fetch("/api/documents/upload-firebase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:D.name.trim()||S.name.replace(/\.[^/.]+$/,""),fileBase64:o,mimeType:t,category:D.category.trim()||void 0,description:D.description.trim()||void 0,userEmail:(null==e?void 0:e.email)||"admin@pmd.com"})});if(clearInterval(r),T(100),!a.ok){let e=await a.json().catch(()=>({error:"Unknown error"}));throw Error(e.error||"HTTP error! status: ".concat(a.status))}let l=await a.json();if(!l.success)throw Error(l.error||"Upload failed");console.log("✅ Firebase upload successful:",l),console.log("✅ Uploaded document URL:",l.url),console.log("✅ Uploaded document fileId:",l.fileId);try{console.log("\uD83D\uDCDD Registering document in Google Sheet...");let t=await fetch("/api/documents/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"upload",title:D.name.trim()||S.name.replace(/\.[^/.]+$/,""),category:D.category.trim()||"",description:D.description.trim()||"",externalUrl:l.url,userEmail:(null==e?void 0:e.email)||"admin@pmd.com"})});if(t.ok){let e=await t.json();e.success?console.log("✅ Document registered in Google Sheet"):console.warn("⚠️ Google Sheet registration returned success=false:",e.error)}else{let e=await t.json().catch(()=>({error:"Unknown error"}));console.warn("⚠️ Failed to register in Google Sheet:",e.error)}}catch(e){console.warn("⚠️ Error registering in Google Sheet (non-critical):",e.message)}C({name:"",url:"",type:"",category:"",description:""}),U(null),T(0),A(!1),await O()}else{let o=await B(S),a=await fetch("/api/documents/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"upload",title:D.name.trim(),fileBase64:o,mimeType:t,category:D.category.trim()||void 0,description:D.description.trim()||void 0,userEmail:(null==e?void 0:e.email)||"admin@pmd.com"})});if(clearInterval(r),T(100),!a.ok){let e=await a.json().catch(()=>({error:"Unknown error"}));throw Error(e.error||"HTTP error! status: ".concat(a.status))}let l=await a.json();if(!l.success)throw Error(l.error||"Upload failed")}C({name:"",url:"",type:"",category:"",description:""}),U(null),T(0),A(!1),await O()}catch(e){console.error("Error uploading document:",e),alert("Failed to upload document: ".concat((null==e?void 0:e.message)||"Unknown error"))}finally{F(!1),T(0)}},B=e=>new Promise((t,r)=>{let o=new FileReader;o.onload=()=>{let e=o.result;t(e.includes(",")?e.split(",")[1]:e)},o.onerror=r,o.readAsDataURL(e)}),q=e=>{var t;return({pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",txt:"text/plain"})[(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())||""]||"application/octet-stream"},G=async t=>{if(!(null==e?void 0:e.email)){alert("You must be logged in to delete documents");return}if(confirm('Are you sure you want to delete "'.concat(t.title,'"?'))){M(t.title);try{await i(t.title,e.email,t.fileId),await O()}catch(e){console.error("Error deleting document:",e),alert("Failed to delete document: ".concat((null==e?void 0:e.message)||"Unknown error"))}finally{M(null)}}},H=e=>{let t=function(e){if(!e)return e;let t=null,r=e.match(/\/file\/d\/([-\w]{25,})/);if(r&&(t=r[1]),!t){let r=e.match(/[?&]id=([-\w]{25,})/);r&&(t=r[1])}if(!t){let r=e.match(/\/uc\?export=view&id=([-\w]{25,})/);r&&(t=r[1])}return t?"https://drive.google.com/file/d/".concat(t,"/preview"):e}(e.url);window.open(t,"_blank","noopener,noreferrer")},_=e=>{let t=function(e){if(!e)return e;let t=null,r=e.match(/\/file\/d\/([-\w]{25,})/);if(r&&(t=r[1]),!t){let r=e.match(/[?&]id=([-\w]{25,})/);r&&(t=r[1])}if(!t){let r=e.match(/\/uc\?export=view&id=([-\w]{25,})/);r&&(t=r[1])}return t?"https://drive.google.com/uc?export=download&id=".concat(t):e}(e.url),r=document.createElement("a");r.href=t,r.download=e.title||"document",r.target="_blank",document.body.appendChild(r),r.click(),document.body.removeChild(r)};return f?(0,o.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,o.jsx)("div",{className:"text-lg text-gray-600",children:"Loading..."})}):(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Documents"}),(0,o.jsxs)("button",{onClick:()=>A(!k),className:"flex items-center gap-2 rounded-lg bg-primary-600 px-4 py-2 text-white transition-colors hover:bg-primary-700",children:[(0,o.jsx)(d.A,{className:"h-5 w-5"}),"Add Document"]})]}),k&&(0,o.jsxs)("div",{className:"mb-6 rounded-lg bg-white p-6 shadow-md",children:[(0,o.jsx)("h2",{className:"mb-4 text-xl font-semibold",children:"Add New Document"}),(0,o.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex gap-4",children:[(0,o.jsxs)("button",{type:"button",onClick:()=>{w("url"),U(null),C({name:"",url:"",type:"",category:"",description:""})},className:"flex items-center gap-2 px-4 py-2 font-medium transition-colors ".concat("url"===b?"border-b-2 border-primary-600 text-primary-600":"text-gray-500 hover:text-gray-700"),children:[(0,o.jsx)(c.A,{className:"h-4 w-4"}),"Add by URL"]}),(0,o.jsxs)("button",{type:"button",onClick:()=>{w("upload"),C({name:"",url:"",type:"",category:"",description:""})},className:"flex items-center gap-2 px-4 py-2 font-medium transition-colors ".concat("upload"===b?"border-b-2 border-primary-600 text-primary-600":"text-gray-500 hover:text-gray-700"),children:[(0,o.jsx)(u.A,{className:"h-4 w-4"}),"Upload File"]})]})}),"url"===b&&(0,o.jsxs)("form",{onSubmit:R,children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name *"}),(0,o.jsx)("input",{type:"text",required:!0,value:D.name,onChange:e=>C({...D,name:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"URL *"}),(0,o.jsx)("input",{type:"url",required:!0,value:D.url,onChange:e=>C({...D,url:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,o.jsx)("input",{type:"text",value:D.type,onChange:e=>C({...D,type:e.target.value}),placeholder:"e.g., PDF, DOCX",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,o.jsx)("input",{type:"text",value:D.category,onChange:e=>C({...D,category:e.target.value}),placeholder:"Optional category",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,o.jsxs)("div",{className:"md:col-span-2",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,o.jsx)("textarea",{value:D.description,onChange:e=>C({...D,description:e.target.value}),placeholder:"Optional description",rows:3,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),(0,o.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,o.jsx)("button",{type:"submit",disabled:I,className:"rounded-lg bg-primary-600 px-6 py-2 text-white transition-colors hover:bg-primary-700 disabled:opacity-50",children:I?"Saving...":"Save Document"}),(0,o.jsx)("button",{type:"button",onClick:()=>{A(!1),C({name:"",url:"",type:"",category:"",description:""})},className:"rounded-lg border border-gray-300 px-6 py-2 text-gray-700 transition-colors hover:bg-gray-50",children:"Cancel"})]})]}),"upload"===b&&(0,o.jsxs)("form",{onSubmit:L,children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Upload To"}),(0,o.jsxs)("div",{className:"mt-2 flex gap-4 text-sm",children:[(0,o.jsxs)("label",{className:"inline-flex items-center gap-2 text-gray-800",children:[(0,o.jsx)("input",{type:"radio",name:"upload-target",value:"gdrive",checked:"gdrive"===j,onChange:()=>N("gdrive")}),(0,o.jsx)("span",{children:"Google Drive (Apps Script)"})]}),(0,o.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,o.jsx)("input",{type:"radio",name:"upload-target",value:"firebase",checked:"firebase"===j,onChange:()=>N("firebase")}),(0,o.jsx)("span",{className:"text-gray-800",children:"Firebase Storage"})]})]}),(0,o.jsx)("p",{className:"mt-1 text-xs text-gray-600",children:"Drive (Apps Script) keeps documents in the existing sheet/Drive path. Firebase stores the file in Storage and metadata in Firestore."})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name *"}),(0,o.jsx)("input",{type:"text",required:!0,value:D.name,onChange:e=>C({...D,name:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"File *"}),(0,o.jsx)("input",{type:"file",required:!0,onChange:e=>{var t,r;let o=null===(t=e.target.files)||void 0===t?void 0:t[0];if(o){U(o),D.name||C({...D,name:o.name.replace(/\.[^/.]+$/,"")});let e=null===(r=o.name.split(".").pop())||void 0===r?void 0:r.toUpperCase();e&&!D.type&&C({...D,type:e})}},className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm file:mr-4 file:rounded-md file:border-0 file:bg-primary-50 file:px-4 file:py-2 file:text-primary-700 hover:file:bg-primary-100 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"}),S&&(0,o.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Selected: ",S.name," (",(S.size/1024/1024).toFixed(2)," MB)"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,o.jsx)("input",{type:"text",value:D.type,onChange:e=>C({...D,type:e.target.value}),placeholder:"Auto-detected from file",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,o.jsx)("input",{type:"text",value:D.category,onChange:e=>C({...D,category:e.target.value}),placeholder:"Optional category",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,o.jsxs)("div",{className:"md:col-span-2",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,o.jsx)("textarea",{value:D.description,onChange:e=>C({...D,description:e.target.value}),placeholder:"Optional description",rows:3,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),E>0&&E<100&&(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsxs)("div",{className:"mb-1 flex justify-between text-sm text-gray-600",children:[(0,o.jsx)("span",{children:"Uploading..."}),(0,o.jsxs)("span",{children:[E,"%"]})]}),(0,o.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-gray-200",children:(0,o.jsx)("div",{className:"h-full bg-primary-600 transition-all duration-300",style:{width:"".concat(E,"%")}})})]}),(0,o.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,o.jsx)("button",{type:"submit",disabled:I||!S,className:"rounded-lg bg-primary-600 px-6 py-2 text-white transition-colors hover:bg-primary-700 disabled:opacity-50",children:I?"Uploading...":"Upload Document"}),(0,o.jsx)("button",{type:"button",onClick:()=>{A(!1),C({name:"",url:"",type:"",category:"",description:""}),U(null),T(0)},className:"rounded-lg border border-gray-300 px-6 py-2 text-gray-700 transition-colors hover:bg-gray-50",children:"Cancel"})]})]})]}),(0,o.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.map((e,t)=>(0,o.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow-md",children:[(0,o.jsx)("div",{className:"mb-4 flex items-start justify-between",children:(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)(m.A,{className:"h-8 w-8 text-primary-600"}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,o.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),(()=>{let t=e.url||"",r=t.includes("storage.googleapis.com")||t.includes("firebasestorage.app"),a=t.includes("drive.google.com");return r?(0,o.jsx)("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-800",title:"Stored in Firebase Storage",children:"\uD83D\uDD25 Firebase"}):a?(0,o.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2 py-0.5 text-xs font-medium text-green-800",title:"Stored in Google Drive",children:"\uD83D\uDCC1 Google Drive"}):(0,o.jsx)("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-800",title:"Unknown source",children:"❓ Unknown"})})()]}),e.category&&(0,o.jsx)("p",{className:"text-sm text-gray-500",children:e.category}),e.description&&(0,o.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:e.description})]})]})}),e.uploadedDate&&(0,o.jsxs)("p",{className:"mb-2 text-xs text-gray-500",children:["Uploaded on: ",e.uploadedDate?(0,h.r)(new Date(e.uploadedDate)):"Unknown date"]}),e.uploadedBy&&(0,o.jsxs)("p",{className:"mb-4 text-xs text-gray-500",children:["Uploaded by: ",e.uploadedBy]}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,o.jsxs)("button",{onClick:()=>H(e),className:"flex items-center gap-2 rounded-md bg-blue-50 px-3 py-2 text-sm text-blue-700 transition-colors hover:bg-blue-100",title:"Preview document",children:[(0,o.jsx)(p,{className:"h-4 w-4"}),"Preview"]}),(0,o.jsxs)("button",{onClick:()=>_(e),className:"flex items-center gap-2 rounded-md bg-green-50 px-3 py-2 text-sm text-green-700 transition-colors hover:bg-green-100",title:"Download document",children:[(0,o.jsx)(g.A,{className:"h-4 w-4"}),"Download"]}),(0,o.jsxs)("button",{onClick:()=>G(e),disabled:P===e.title,className:"flex items-center gap-2 rounded-md bg-red-50 px-3 py-2 text-sm text-red-700 transition-colors hover:bg-red-100 disabled:opacity-50",title:"Delete document",children:[(0,o.jsx)(y.A,{className:"h-4 w-4"}),P===e.title?"Deleting...":"Delete"]}),(0,o.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-md bg-gray-50 px-3 py-2 text-sm text-gray-700 transition-colors hover:bg-gray-100",title:"Open in new tab",children:[(0,o.jsx)(x.A,{className:"h-4 w-4"}),"Open"]})]})]},e.id||e.fileId||t))}),0===t.length&&(0,o.jsx)("div",{className:"rounded-lg bg-white p-12 text-center shadow-md",children:(0,o.jsx)("p",{className:"text-lg text-gray-500",children:"No documents found"})})]})}},1788:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(9946).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2171:(e,t,r)=>{"use strict";r.d(t,{A:()=>s,AuthProvider:()=>i});var o=r(5155),a=r(2115),l=r(9490);let n=(0,a.createContext)({user:null,loading:!0});function i(e){let{children:t}=e,[r,i]=(0,a.useState)(null),[s,d]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{try{let e=(0,l.Yk)(e=>{i(e),d(!1)});return()=>e()}catch(e){console.error("Error initializing auth:",e),d(!1)}},[]),(0,o.jsx)(n.Provider,{value:{user:r,loading:s},children:t})}let s=()=>(0,a.useContext)(n)},2304:(e,t,r)=>{Promise.resolve().then(r.bind(r,890))},2525:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(9946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3786:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(9946).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l,r:()=>n});var o=r(2596),a=r(9688);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,o.$)(t))}function n(e){return e?("string"==typeof e?new Date(e):e).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}},4616:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7434:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(9946).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},8164:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(9946).A)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},9490:(e,t,r)=>{"use strict";r.d(t,{CI:()=>i,G6:()=>n,Yk:()=>s});var o=r(5404),a=r(1138);let l=new o.HF,n=async()=>{if(!a.j2)throw Error("Firebase Auth not initialized");try{return(await (0,o.df)(a.j2,l)).user}catch(e){throw console.error("Error signing in:",e),e}},i=async()=>{if(!a.j2)throw Error("Firebase Auth not initialized");try{await (0,o.CI)(a.j2)}catch(e){throw console.error("Error signing out:",e),e}},s=e=>a.j2?(0,o.hg)(a.j2,e):(e(null),()=>{})},9869:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(9946).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[135,563,521,598,974,441,684,358],()=>t(2304)),_N_E=e.O()}]);