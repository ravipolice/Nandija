(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[466],{2525:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3445:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),a=r(2115),l=r(1593),i=r(4616),o=r(3717),n=r(2525);let d={name:250,range:200,status:120,actions:120};function c(){let[e,t]=(0,a.useState)([]),[r,c]=(0,a.useState)(!0),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),[p,g]=(0,a.useState)({name:"",range:""}),[b,y]=(0,a.useState)(!1),[f,v]=(0,a.useState)(()=>{{let e=localStorage.getItem("districtColumnWidths");return e?{...d,...JSON.parse(e)}:d}}),[w,N]=(0,a.useState)(null);(0,a.useEffect)(()=>{k()},[]);let k=async()=>{try{let e=await (0,l.cM)();console.log("Loaded districts:",e),t(e),0===e.length&&console.warn("No districts found. Make sure districts exist in Firestore.")}catch(e){console.error("Error loading districts:",e),alert("Failed to load districts. Please check the console for details.")}finally{c(!1)}},j=e=>{h(e.id||null),g({name:e.name,range:e.range||""}),m(!0)},A=async(e,t)=>{if(confirm('Are you sure you want to delete "'.concat(t,'"?')))try{await (0,l.ae)(e),await k()}catch(e){console.error("Error deleting district:",e),alert("Failed to delete district")}},S=()=>{m(!1),h(null),g({name:"",range:""})},E=(e,t)=>{e.preventDefault(),N(t);let r=e.pageX,s=f[t],a=e=>{let a=Math.max(50,s+(e.pageX-r));v(e=>{let r={...e,[t]:a};return localStorage.setItem("districtColumnWidths",JSON.stringify(r)),r})},l=()=>{N(null),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",l)},C=async e=>{e.preventDefault(),y(!0);try{x?await (0,l.qB)(x,{name:p.name.trim(),range:p.range.trim()||void 0}):await (0,l.Fr)({name:p.name.trim(),range:p.range.trim()||void 0}),S(),await k()}catch(e){console.error("Error saving district:",e),alert("Failed to ".concat(x?"update":"create"," district"))}finally{y(!1)}};return r?(0,s.jsx)("div",{className:"flex h-screen items-center justify-center bg-gradient-dark",children:(0,s.jsx)("div",{className:"text-lg text-slate-100-secondary",children:"Loading..."})}):(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"Districts"}),(0,s.jsxs)("button",{onClick:()=>m(!u),className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-purple-600 to-blue-600 px-4 py-2 text-white transition-all hover:shadow-lg hover:shadow-purple-500/50",children:[(0,s.jsx)(i.A,{className:"h-5 w-5"}),"Add District"]})]}),u&&(0,s.jsxs)("div",{className:"mb-6 rounded-lg bg-dark-card border border-dark-border p-6 shadow-lg",children:[(0,s.jsx)("h2",{className:"mb-4 text-xl font-semibold text-slate-100",children:x?"Edit District":"Add New District"}),(0,s.jsxs)("form",{onSubmit:C,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-100-secondary",children:"Name *"}),(0,s.jsx)("input",{type:"text",required:!0,value:p.name,onChange:e=>g({...p,name:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-100-secondary",children:"Range"}),(0,s.jsx)("input",{type:"text",value:p.range,onChange:e=>g({...p,range:e.target.value}),className:"mt-1 block w-full rounded-md bg-dark-sidebar border border-dark-border px-3 py-2 text-slate-100 placeholder-slate-400 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50"})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,s.jsx)("button",{type:"submit",disabled:b,className:"rounded-lg bg-gradient-to-r from-purple-600 to-blue-600 px-6 py-2 text-white transition-all hover:shadow-lg hover:shadow-purple-500/50 disabled:opacity-50",children:b?"Saving...":"Save District"}),(0,s.jsx)("button",{type:"button",onClick:S,className:"rounded-lg border border-dark-border px-6 py-2 text-slate-100-secondary transition-colors hover:bg-dark-sidebar hover:text-slate-100",children:"Cancel"})]})]})]}),(0,s.jsxs)("div",{className:"overflow-x-auto rounded-lg bg-dark-card border border-dark-border shadow-lg",style:{overflowX:"scroll",WebkitOverflowScrolling:"touch"},children:[(0,s.jsxs)("table",{className:"w-full",style:{tableLayout:"fixed"},children:[(0,s.jsx)("thead",{className:"bg-dark-sidebar border-b border-dark-border",children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:f.name},children:["Name",(0,s.jsx)("div",{onMouseDown:e=>E(e,"name"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:f.range},children:["Range",(0,s.jsx)("div",{onMouseDown:e=>E(e,"range"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,s.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:f.status},children:["Status",(0,s.jsx)("div",{onMouseDown:e=>E(e,"status"),style:{cursor:"col-resize"},className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-purple-500"})]}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-slate-100-secondary relative",style:{width:f.actions},children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-dark-border bg-dark-card",children:e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-dark-sidebar transition-colors",children:[(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-100 overflow-hidden text-ellipsis",style:{maxWidth:f.name},children:e.name}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-100-secondary overflow-hidden text-ellipsis",style:{maxWidth:f.range},children:e.range||"N/A"}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 overflow-hidden text-ellipsis",style:{maxWidth:f.status},children:(0,s.jsx)("span",{className:"inline-flex rounded-full bg-green-500/20 px-2 text-xs font-semibold text-green-400",children:"Active"})}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>j(e),className:"text-purple-400 hover:text-purple-300 transition-colors",title:"Edit",children:(0,s.jsx)(o.A,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>A(e.id,e.name),className:"text-red-400 hover:text-red-300 transition-colors",title:"Delete",children:(0,s.jsx)(n.A,{className:"h-5 w-5"})})]})})]},e.id))})]}),0===e.length&&(0,s.jsx)("div",{className:"py-12 text-center text-slate-100-secondary",children:"No districts found"})]})]})}},3717:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4616:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8781:(e,t,r)=>{Promise.resolve().then(r.bind(r,3445))},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(2115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:n,className:d="",children:c,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:t,...i,width:a,height:a,stroke:r,strokeWidth:n?24*Number(o)/Number(a):o,className:l("lucide",d),...m},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),n=(e,t)=>{let r=(0,s.forwardRef)((r,i)=>{let{className:n,...d}=r;return(0,s.createElement)(o,{ref:i,iconNode:t,className:l("lucide-".concat(a(e)),n),...d})});return r.displayName="".concat(e),r}}},e=>{var t=t=>e(e.s=t);e.O(0,[135,563,521,974,441,684,358],()=>t(8781)),_N_E=e.O()}]);